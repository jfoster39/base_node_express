'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _typeof2 = require('babel-runtime/helpers/typeof');

var _typeof3 = _interopRequireDefault(_typeof2);

var _getOwnPropertyDescriptor = require('babel-runtime/core-js/object/get-own-property-descriptor');

var _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);

var _assign = require('babel-runtime/core-js/object/assign');

var _assign2 = _interopRequireDefault(_assign);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _desc, _value, _class;

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _queryBuilderOperation = require('./decorators/queryBuilderOperation');

var _queryBuilderOperation2 = _interopRequireDefault(_queryBuilderOperation);

var _QueryBuilderContext = require('./QueryBuilderContext');

var _QueryBuilderContext2 = _interopRequireDefault(_QueryBuilderContext);

var _RelationExpression = require('./RelationExpression');

var _RelationExpression2 = _interopRequireDefault(_RelationExpression);

var _QueryBuilderBase2 = require('./QueryBuilderBase');

var _QueryBuilderBase3 = _interopRequireDefault(_QueryBuilderBase2);

var _ValidationError = require('../ValidationError');

var _ValidationError2 = _interopRequireDefault(_ValidationError);

var _FindOperation = require('./operations/FindOperation');

var _FindOperation2 = _interopRequireDefault(_FindOperation);

var _DeleteOperation = require('./operations/DeleteOperation');

var _DeleteOperation2 = _interopRequireDefault(_DeleteOperation);

var _UpdateOperation = require('./operations/UpdateOperation');

var _UpdateOperation2 = _interopRequireDefault(_UpdateOperation);

var _InsertOperation = require('./operations/InsertOperation');

var _InsertOperation2 = _interopRequireDefault(_InsertOperation);

var _InsertGraphAndFetchOperation = require('./operations/InsertGraphAndFetchOperation');

var _InsertGraphAndFetchOperation2 = _interopRequireDefault(_InsertGraphAndFetchOperation);

var _InsertAndFetchOperation = require('./operations/InsertAndFetchOperation');

var _InsertAndFetchOperation2 = _interopRequireDefault(_InsertAndFetchOperation);

var _UpdateAndFetchOperation = require('./operations/UpdateAndFetchOperation');

var _UpdateAndFetchOperation2 = _interopRequireDefault(_UpdateAndFetchOperation);

var _QueryBuilderOperation = require('./operations/QueryBuilderOperation');

var _QueryBuilderOperation2 = _interopRequireDefault(_QueryBuilderOperation);

var _JoinRelationOperation = require('./operations/JoinRelationOperation');

var _JoinRelationOperation2 = _interopRequireDefault(_JoinRelationOperation);

var _InsertGraphOperation = require('./operations/InsertGraphOperation');

var _InsertGraphOperation2 = _interopRequireDefault(_InsertGraphOperation);

var _RunBeforeOperation = require('./operations/RunBeforeOperation');

var _RunBeforeOperation2 = _interopRequireDefault(_RunBeforeOperation);

var _RunAfterOperation = require('./operations/RunAfterOperation');

var _RunAfterOperation2 = _interopRequireDefault(_RunAfterOperation);

var _OnBuildOperation = require('./operations/OnBuildOperation');

var _OnBuildOperation2 = _interopRequireDefault(_OnBuildOperation);

var _SelectOperation = require('./operations/SelectOperation');

var _SelectOperation2 = _interopRequireDefault(_SelectOperation);

var _EagerOperation = require('./operations/EagerOperation');

var _EagerOperation2 = _interopRequireDefault(_EagerOperation);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
  var desc = {};
  Object['ke' + 'ys'](descriptor).forEach(function (key) {
    desc[key] = descriptor[key];
  });
  desc.enumerable = !!desc.enumerable;
  desc.configurable = !!desc.configurable;

  if ('value' in desc || desc.initializer) {
    desc.writable = true;
  }

  desc = decorators.slice().reverse().reduce(function (desc, decorator) {
    return decorator(target, property, desc) || desc;
  }, desc);

  if (context && desc.initializer !== void 0) {
    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
    desc.initializer = undefined;
  }

  if (desc.initializer === void 0) {
    Object['define' + 'Property'](target, property, desc);
    desc = null;
  }

  return desc;
}

var QueryBuilder = (_dec = (0, _queryBuilderOperation2.default)(_RunBeforeOperation2.default), _dec2 = (0, _queryBuilderOperation2.default)(_OnBuildOperation2.default), _dec3 = (0, _queryBuilderOperation2.default)(_RunAfterOperation2.default), _dec4 = (0, _queryBuilderOperation2.default)([_JoinRelationOperation2.default, { joinOperation: 'join' }]), _dec5 = (0, _queryBuilderOperation2.default)([_JoinRelationOperation2.default, { joinOperation: 'innerJoin' }]), _dec6 = (0, _queryBuilderOperation2.default)([_JoinRelationOperation2.default, { joinOperation: 'outerJoin' }]), _dec7 = (0, _queryBuilderOperation2.default)([_JoinRelationOperation2.default, { joinOperation: 'leftJoin' }]), _dec8 = (0, _queryBuilderOperation2.default)([_JoinRelationOperation2.default, { joinOperation: 'leftOuterJoin' }]), _dec9 = (0, _queryBuilderOperation2.default)([_JoinRelationOperation2.default, { joinOperation: 'rightJoin' }]), _dec10 = (0, _queryBuilderOperation2.default)([_JoinRelationOperation2.default, { joinOperation: 'rightOuterJoin' }]), _dec11 = (0, _queryBuilderOperation2.default)([_JoinRelationOperation2.default, { joinOperation: 'fullOuterJoin' }]), (_class = function (_QueryBuilderBase) {
  (0, _inherits3.default)(QueryBuilder, _QueryBuilderBase);

  function QueryBuilder(modelClass) {
    (0, _classCallCheck3.default)(this, QueryBuilder);

    var _this = (0, _possibleConstructorReturn3.default)(this, _QueryBuilderBase.call(this, modelClass.knex(), _QueryBuilderContext2.default));

    _this._modelClass = modelClass;
    _this._explicitRejectValue = null;
    _this._explicitResolveValue = null;

    _this._eagerExpression = null;
    _this._eagerFilterExpressions = [];
    _this._allowedEagerExpression = null;
    _this._allowedInsertExpression = null;

    _this._findOperationOptions = {};
    _this._eagerOperationOptions = {};

    _this._findOperationFactory = findOperationFactory;
    _this._insertOperationFactory = insertOperationFactory;
    _this._updateOperationFactory = updateOperationFactory;
    _this._patchOperationFactory = patchOperationFactory;
    _this._relateOperationFactory = relateOperationFactory;
    _this._unrelateOperationFactory = unrelateOperationFactory;
    _this._deleteOperationFactory = deleteOperationFactory;
    _this._eagerOperationFactory = modelClass.defaultEagerAlgorithm;
    return _this;
  }

  /**
   * @param {Model} modelClass
   * @returns {QueryBuilder}
   */


  QueryBuilder.forClass = function forClass(modelClass) {
    return new this(modelClass);
  };

  /**
   * @param {QueryBuilderBase} query
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.childQueryOf = function childQueryOf(query) {
    if (query) {
      this.internalContext(query.internalContext());
    }

    return this;
  };

  /**
   * @param {Error} error
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.reject = function reject(error) {
    this._explicitRejectValue = error;
    return this;
  };

  /**
   * @param {*} value
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.resolve = function resolve(value) {
    this._explicitResolveValue = value;
    return this;
  };

  /**
   * @returns {boolean}
   */


  QueryBuilder.prototype.isExecutable = function isExecutable() {
    var hasExecutor = !!this._queryExecutorOperation();
    return !this._explicitRejectValue && !this._explicitResolveValue && !hasExecutor;
  };

  /**
   * @param {function(*, QueryBuilder)} runBefore
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.runBefore = function runBefore(_runBefore) {};

  /**
   * @param {function(QueryBuilder)} onBuild
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.onBuild = function onBuild(_onBuild) {};

  /**
   * @param {function(Model|Array.<Model>, QueryBuilder)} runAfter
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.runAfter = function runAfter(_runAfter) {};

  /**
   * @param {function(QueryBuilder):EagerOperation} algorithm
   * @param {object=} eagerOptions
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.eagerAlgorithm = function eagerAlgorithm(algorithm, eagerOptions) {
    this.eagerOperationFactory(algorithm);

    if (eagerOptions) {
      this.eagerOptions(eagerOptions);
    }

    return this;
  };

  /**
   * @param {function(QueryBuilder):EagerOperation} factory
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.eagerOperationFactory = function eagerOperationFactory(factory) {
    this._eagerOperationFactory = factory;
    return this;
  };

  /**
   * @param {function(QueryBuilder):QueryBuilderOperation} factory
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.findOperationFactory = function findOperationFactory(factory) {
    this._findOperationFactory = factory;
    return this;
  };

  /**
   * @param {function(QueryBuilder):QueryBuilderOperation} factory
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.insertOperationFactory = function insertOperationFactory(factory) {
    this._insertOperationFactory = factory;
    return this;
  };

  /**
   * @param {function(QueryBuilder):QueryBuilderOperation} factory
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.updateOperationFactory = function updateOperationFactory(factory) {
    this._updateOperationFactory = factory;
    return this;
  };

  /**
   * @param {function(QueryBuilder):QueryBuilderOperation} factory
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.patchOperationFactory = function patchOperationFactory(factory) {
    this._patchOperationFactory = factory;
    return this;
  };

  /**
   * @param {function(QueryBuilder):QueryBuilderOperation} factory
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.deleteOperationFactory = function deleteOperationFactory(factory) {
    this._deleteOperationFactory = factory;
    return this;
  };

  /**
   * @param {function(QueryBuilder):QueryBuilderOperation} factory
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.relateOperationFactory = function relateOperationFactory(factory) {
    this._relateOperationFactory = factory;
    return this;
  };

  /**
   * @param {function(QueryBuilder):QueryBuilderOperation} factory
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.unrelateOperationFactory = function unrelateOperationFactory(factory) {
    this._unrelateOperationFactory = factory;
    return this;
  };

  /**
   * @param {string|RelationExpression} exp
   * @param {Object.<string, function(QueryBuilder)>=} filters
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.eager = function eager(exp, filters) {
    this._eagerExpression = exp || null;

    if (_lodash2.default.isString(this._eagerExpression)) {
      this._eagerExpression = _RelationExpression2.default.parse(this._eagerExpression);
    }

    if (_lodash2.default.isObject(filters)) {
      this._eagerExpression.filters = filters;
    }

    checkEager(this);
    return this;
  };

  /**
   * @param {string|RelationExpression} exp
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.allowEager = function allowEager(exp) {
    this._allowedEagerExpression = exp || null;

    if (_lodash2.default.isString(this._allowedEagerExpression)) {
      this._allowedEagerExpression = _RelationExpression2.default.parse(this._allowedEagerExpression);
    }

    checkEager(this);
    return this;
  };

  /**
   * @param {string|RelationExpression} path
   * @param {function(QueryBuilder)} modifier
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.modifyEager = function modifyEager(path, modifier) {
    this._eagerFilterExpressions.push({
      path: path,
      filter: modifier
    });

    return this;
  };

  QueryBuilder.prototype.filterEager = function filterEager() {
    return this.modifyEager.apply(this, arguments);
  };

  /**
   * @param {string|RelationExpression} exp
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.allowInsert = function allowInsert(exp) {
    this._allowedInsertExpression = exp || null;

    if (_lodash2.default.isString(this._allowedInsertExpression)) {
      this._allowedInsertExpression = _RelationExpression2.default.parse(this._allowedInsertExpression);
    }

    return this;
  };

  /**
   * @param {object} opt
   * @return {QueryBuilder}
   */


  QueryBuilder.prototype.eagerOptions = function eagerOptions(opt) {
    this._eagerOperationOptions = (0, _assign2.default)({}, this._eagerOperationOptions, opt);
    var opIdx = this.indexOfOperation(_EagerOperation2.default);

    if (opIdx !== -1) {
      this._operations[opIdx] = this._operations[opIdx].clone({
        opt: this._findOperationOptions
      });
    }

    return this;
  };

  /**
   * @param {object} opt
   * @return {QueryBuilder}
   */


  QueryBuilder.prototype.findOptions = function findOptions(opt) {
    this._findOperationOptions = (0, _assign2.default)({}, this._findOperationOptions, opt);
    var opIdx = this.indexOfOperation(_FindOperation2.default);

    if (opIdx !== -1) {
      this._operations[opIdx] = this._operations[opIdx].clone({
        opt: this._findOperationOptions
      });
    }

    return this;
  };

  /**
   * @returns {Constructor.<Model>}
   */


  QueryBuilder.prototype.modelClass = function modelClass() {
    return this._modelClass;
  };

  /**
   * @returns {boolean}
   */


  QueryBuilder.prototype.isFindQuery = function isFindQuery() {
    return !_lodash2.default.some(this._operations, function (method) {
      return method.isWriteOperation;
    }) && !this._explicitRejectValue;
  };

  /**
   * @returns {string}
   */


  QueryBuilder.prototype.toString = function toString() {
    return this.build().toString();
  };

  /**
   * @returns {string}
   */


  QueryBuilder.prototype.toSql = function toSql() {
    return this.toString();
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.clone = function clone() {
    var builder = new this.constructor(this._modelClass);
    this.baseCloneInto(builder);

    builder._explicitRejectValue = this._explicitRejectValue;
    builder._explicitResolveValue = this._explicitResolveValue;

    builder._eagerExpression = this._eagerExpression;
    builder._eagerFilterExpressions = this._eagerFilterExpressions.slice();

    builder._allowedEagerExpression = this._allowedEagerExpression;
    builder._allowedInsertExpression = this._allowedInsertExpression;

    builder._findOperationOptions = this._findOperationOptions;
    builder._eagerOperationOptions = this._eagerOperationOptions;

    builder._findOperationFactory = this._findOperationFactory;
    builder._insertOperationFactory = this._insertOperationFactory;
    builder._updateOperationFactory = this._updateOperationFactory;
    builder._patchOperationFactory = this._patchOperationFactory;
    builder._relateOperationFactory = this._relateOperationFactory;
    builder._unrelateOperationFactory = this._unrelateOperationFactory;
    builder._deleteOperationFactory = this._deleteOperationFactory;
    builder._eagerOperationFactory = this._eagerOperationFactory;

    return builder;
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.clearEager = function clearEager() {
    this._eagerExpression = null;
    this._eagerFilterExpressions = [];
    return this;
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.clearReject = function clearReject() {
    this._explicitRejectValue = null;
    return this;
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.clearResolve = function clearResolve() {
    this._explicitResolveValue = null;
    return this;
  };

  /**
   * @param {function=} successHandler
   * @param {function=} errorHandler
   * @returns {Promise}
   */


  QueryBuilder.prototype.then = function then(successHandler, errorHandler) {
    var promise = this.execute();
    return promise.then.apply(promise, arguments);
  };

  /**
   * @param {function} mapper
   * @returns {Promise}
   */


  QueryBuilder.prototype.map = function map(mapper) {
    var promise = this.execute();
    return promise.map.apply(promise, arguments);
  };

  /**
   * @param {function} errorHandler
   * @returns {Promise}
   */


  QueryBuilder.prototype.catch = function _catch(errorHandler) {
    var promise = this.execute();
    return promise.catch.apply(promise, arguments);
  };

  /**
   * @param {*} returnValue
   * @returns {Promise}
   */


  QueryBuilder.prototype.return = function _return(returnValue) {
    var promise = this.execute();
    return promise.return.apply(promise, arguments);
  };

  /**
   * @param {*} context
   * @returns {Promise}
   */


  QueryBuilder.prototype.bind = function bind(context) {
    var promise = this.execute();
    return promise.bind.apply(promise, arguments);
  };

  /**
   * @param {function} callback
   * @returns {Promise}
   */


  QueryBuilder.prototype.asCallback = function asCallback(callback) {
    var promise = this.execute();
    return promise.asCallback.apply(promise, arguments);
  };

  /**
   * @param {function} callback
   * @returns {Promise}
   */


  QueryBuilder.prototype.nodeify = function nodeify(callback) {
    var promise = this.execute();
    return promise.nodeify.apply(promise, arguments);
  };

  /**
   * @returns {Promise}
   */


  QueryBuilder.prototype.resultSize = function resultSize() {
    var knex = this.knex();

    // orderBy is useless here and it can make things a lot slower (at least with postgresql 9.3).
    // Remove it from the count query. We also remove the offset and limit
    var query = this.clone().clear(/orderBy|offset|limit/).build();
    var rawQuery = knex.raw(query).wrap('(', ') as temp');
    var countQuery = knex.count('* as count').from(rawQuery);

    return countQuery.then(function (result) {
      return result[0] ? result[0].count : 0;
    });
  };

  /**
   * @param {number} page
   * @param {number} pageSize
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.page = function page(_page, pageSize) {
    return this.range(_page * pageSize, (_page + 1) * pageSize - 1);
  };

  /**
   * @param {number} start
   * @param {number} end
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.range = function range(start, end) {
    var _this2 = this;

    var resultSizePromise = void 0;

    return this.limit(end - start + 1).offset(start).runBefore(function () {
      // Don't return the promise so that it is executed
      // in parallel with the actual query.
      resultSizePromise = _this2.resultSize();
    }).runAfter(function (results) {
      // Now that the actual query is finished, wait until the
      // result size has been calculated.
      return _bluebird2.default.all([results, resultSizePromise]);
    }).runAfter(function (arr) {
      return {
        results: arr[0],
        total: _lodash2.default.parseInt(arr[1])
      };
    });
  };

  /**
   * @returns {knex.QueryBuilder}
   */
  QueryBuilder.prototype.build = function build() {
    // Take a clone so that we don't modify this instance during build.
    var builder = this.clone();

    if (builder.isFindQuery()) {
      // If no write operations have been called at this point this query is a
      // find query and we need to call the custom find implementation.
      builder._callFindOperation();
    }

    if (builder._eagerExpression) {
      builder._callEagerFetchOperation();
    }

    // We need to build the builder even if a query executor operation
    // has been called so that the onBuild hooks get called.
    var knexBuilder = _build(builder);
    var queryExecutorOperation = builder._queryExecutorOperation();

    if (queryExecutorOperation) {
      // If the query executor is set, we build the builder that it returns.
      return queryExecutorOperation.queryExecutor(builder).build();
    } else {
      return knexBuilder;
    }
  };

  /**
   * @returns {Promise}
   */


  QueryBuilder.prototype.execute = function execute() {
    // Take a clone so that we don't modify this instance during execution.
    var builder = this.clone();
    var promiseCtx = { builder: builder };
    var promise = _bluebird2.default.bind(promiseCtx);
    var context = builder.context() || {};
    var internalContext = builder.internalContext();

    if (builder.isFindQuery()) {
      // If no write operations have been called at this point this query is a
      // find query and we need to call the custom find implementation.
      builder._callFindOperation();
    }

    if (builder._eagerExpression) {
      builder._callEagerFetchOperation();
    }

    promise = chainBeforeOperations(promise, builder._operations);
    promise = chainHooks(promise, context.runBefore);
    promise = chainHooks(promise, internalContext.runBefore);
    promise = chainBeforeInternalOperations(promise, builder._operations);

    // Resolve all before hooks before building and executing the query
    // and the rest of the hooks.
    return promise.then(function () {
      var promiseCtx = this;
      var builder = promiseCtx.builder;

      var promise = null;
      var knexBuilder = _build(builder);
      var queryExecutorOperation = builder._queryExecutorOperation();

      if (builder._explicitRejectValue) {
        promise = _bluebird2.default.reject(builder._explicitRejectValue).bind(promiseCtx);
      } else if (builder._explicitResolveValue) {
        promise = _bluebird2.default.resolve(builder._explicitResolveValue).bind(promiseCtx);
      } else if (queryExecutorOperation) {
        promise = queryExecutorOperation.queryExecutor(builder).bind(promiseCtx);
      } else {
        promise = knexBuilder.bind(promiseCtx);
        promise = chainRawResultOperations(promise, builder._operations);
        promise = promise.then(createModels);
      }

      promise = chainAfterQueryOperations(promise, builder._operations);
      promise = chainAfterInternalOperations(promise, builder._operations);
      promise = chainHooks(promise, context.runAfter);
      promise = chainHooks(promise, internalContext.runAfter);
      promise = chainAfterOperations(promise, builder._operations);

      return promise;
    });
  };

  /**
   * @private
   * @returns {QueryBuilderOperation}
   */


  QueryBuilder.prototype._queryExecutorOperation = function _queryExecutorOperation() {
    for (var i = 0, l = this._operations.length; i < l; ++i) {
      var op = this._operations[i];

      if (op.hasQueryExecutor()) {
        return op;
      }
    }

    return null;
  };

  /**
   * @private
   */


  QueryBuilder.prototype._callFindOperation = function _callFindOperation() {
    if (!this.has(_FindOperation2.default)) {
      var operation = this._findOperationFactory(this);

      operation.opt = _lodash2.default.merge(operation.opt, this._findOperationOptions);

      this.callQueryBuilderOperation(operation, [], /* pushFront = */true);
    }
  };

  /**
   * @private
   */


  QueryBuilder.prototype._callEagerFetchOperation = function _callEagerFetchOperation() {
    if (!this.has(_EagerOperation2.default) && this._eagerExpression) {
      var operation = this._eagerOperationFactory(this);

      operation.opt = _lodash2.default.merge(operation.opt, this._modelClass.defaultEagerOptions, this._eagerOperationOptions);

      this.callQueryBuilderOperation(operation, [this._eagerExpression, this._eagerFilterExpressions]);
    }
  };

  /**
   * @param {string} propertyName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.pluck = function pluck(propertyName) {
    return this.runAfter(function (result) {
      if (_lodash2.default.isArray(result)) {
        return _lodash2.default.map(result, propertyName);
      } else {
        return result;
      }
    });
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.first = function first() {
    return this.runAfter(function (result) {
      if (_lodash2.default.isArray(result)) {
        return result[0];
      } else {
        return result;
      }
    });
  };

  /**
   * @returns {boolean}
   */


  QueryBuilder.prototype.hasSelection = function hasSelection(selection) {
    var table = this.modelClass().tableName;
    var noSelectStatements = true;

    for (var i = 0, l = this._operations.length; i < l; ++i) {
      var op = this._operations[i];

      if (op instanceof _SelectOperation2.default) {
        noSelectStatements = false;

        if (op.hasSelection(table, selection)) {
          return true;
        }
      }
    }

    if (noSelectStatements) {
      // Implicit `select *`.
      return true;
    } else {
      return false;
    }
  };

  /**
   * @param {Constructor.<Model>=} modelClass
   * @param {function(Model, Model, string)} traverser
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.traverse = function traverse(modelClass, traverser) {
    var _this3 = this;

    if (_lodash2.default.isUndefined(traverser)) {
      traverser = modelClass;
      modelClass = null;
    }

    return this.runAfter(function (result) {
      _this3._modelClass.traverse(modelClass, result, traverser);
      return result;
    });
  };

  /**
   * @param {Constructor.<Model>=} modelClass
   * @param {Array.<string>} properties
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.pick = function pick(modelClass, properties) {
    if (_lodash2.default.isUndefined(properties)) {
      properties = modelClass;
      modelClass = null;
    }

    properties = _lodash2.default.reduce(properties, function (obj, prop) {
      obj[prop] = true;
      return obj;
    }, {});

    return this.traverse(modelClass, function (model) {
      model.$pick(properties);
    });
  };

  /**
   * @param {Constructor.<Model>=} modelClass
   * @param {Array.<string>} properties
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.omit = function omit(modelClass, properties) {
    if (_lodash2.default.isUndefined(properties)) {
      properties = modelClass;
      modelClass = null;
    }

    // Turn the properties into a hash for performance.
    properties = _lodash2.default.reduce(properties, function (obj, prop) {
      obj[prop] = true;
      return obj;
    }, {});

    return this.traverse(modelClass, function (model) {
      model.$omit(properties);
    });
  };

  /**
   * @param {string} relationName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.joinRelation = function joinRelation(relationName) {};

  /**
   * @param {string} relationName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.innerJoinRelation = function innerJoinRelation(relationName) {};

  /**
   * @param {string} relationName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.outerJoinRelation = function outerJoinRelation(relationName) {};

  /**
   * @param {string} relationName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.leftJoinRelation = function leftJoinRelation(relationName) {};

  /**
   * @param {string} relationName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.leftOuterJoinRelation = function leftOuterJoinRelation(relationName) {};

  /**
   * @param {string} relationName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.rightJoinRelation = function rightJoinRelation(relationName) {};

  /**
   * @param {string} relationName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.rightOuterJoinRelation = function rightOuterJoinRelation(relationName) {};

  /**
   * @param {string} relationName
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.fullOuterJoinRelation = function fullOuterJoinRelation(relationName) {};

  /**
   * @param {string|number|Array.<string|number>} id
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.findById = function findById(id) {
    return this.whereComposite(this._modelClass.getFullIdColumn(), id).first();
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.withSchema = function withSchema(schema) {
    this.internalContext().onBuild.push(function (builder) {
      if (!builder.has(/withSchema/)) {
        // Need to push this operation to the front because knex doesn't use the
        // schema for operations called before `withSchema`.
        builder.callKnexQueryBuilderOperation('withSchema', [schema], true);
      }
    });

    return this;
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.debug = function debug() {
    this.internalContext().onBuild.push(function (builder) {
      builder.callKnexQueryBuilderOperation('debug', []);
    });

    return this;
  };

  /**
   * @param {Object|Model|Array.<Object>|Array.<Model>} modelsOrObjects
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.insert = function insert(modelsOrObjects) {
    var insertOperation = this._insertOperationFactory(this);
    return this.callQueryBuilderOperation(insertOperation, [modelsOrObjects]);
  };

  /**
   * @param {Object|Model|Array.<Object>|Array.<Model>} modelsOrObjects
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.insertAndFetch = function insertAndFetch(modelsOrObjects) {
    var insertAndFetchOperation = new _InsertAndFetchOperation2.default('insertAndFetch', {
      delegate: this._insertOperationFactory(this)
    });

    return this.callQueryBuilderOperation(insertAndFetchOperation, [modelsOrObjects]);
  };

  /**
   * @param {Object|Model|Array.<Object>|Array.<Model>} modelsOrObjects
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.insertGraph = function insertGraph(modelsOrObjects) {
    var insertGraphOperation = new _InsertGraphOperation2.default('insertGraph', {
      delegate: this._insertOperationFactory(this)
    });

    return this.callQueryBuilderOperation(insertGraphOperation, [modelsOrObjects]);
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.insertWithRelated = function insertWithRelated() {
    return this.insertGraph.apply(this, arguments);
  };

  /**
   * @param {Object|Model|Array.<Object>|Array.<Model>} modelsOrObjects
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.insertGraphAndFetch = function insertGraphAndFetch(modelsOrObjects) {
    var insertGraphAndFetchOperation = new _InsertGraphAndFetchOperation2.default('insertGraphAndFetch', {
      delegate: new _InsertGraphOperation2.default('insertGraph', {
        delegate: this._insertOperationFactory(this)
      })
    });

    return this.callQueryBuilderOperation(insertGraphAndFetchOperation, [modelsOrObjects]);
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.insertWithRelatedAndFetch = function insertWithRelatedAndFetch() {
    return this.insertGraphAndFetch.apply(this, arguments);
  };

  /**
   * @param {Model|Object=} modelOrObject
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.update = function update(modelOrObject) {
    var updateOperation = this._updateOperationFactory(this);
    return this.callQueryBuilderOperation(updateOperation, [modelOrObject]);
  };

  /**
   * @param {Model|Object=} modelOrObject
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.updateAndFetch = function updateAndFetch(modelOrObject) {
    var delegateOperation = this._updateOperationFactory(this);

    if (!(delegateOperation.instance instanceof this._modelClass)) {
      throw new Error('updateAndFetch can only be called for instance operations');
    }

    var updateAndFetch = new _UpdateAndFetchOperation2.default('updateAndFetch', {
      delegate: delegateOperation
    });

    return this.callQueryBuilderOperation(updateAndFetch, [delegateOperation.instance.$id(), modelOrObject]);
  };

  /**
   * @param {number|string|Array.<number|string>} id
   * @param {Model|Object=} modelOrObject
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.updateAndFetchById = function updateAndFetchById(id, modelOrObject) {
    var updateAndFetch = new _UpdateAndFetchOperation2.default('updateAndFetch', {
      delegate: this._updateOperationFactory(this)
    });

    return this.callQueryBuilderOperation(updateAndFetch, [id, modelOrObject]);
  };

  /**
   * @param {Model|Object=} modelOrObject
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.patch = function patch(modelOrObject) {
    var patchOperation = this._patchOperationFactory(this);
    return this.callQueryBuilderOperation(patchOperation, [modelOrObject]);
  };

  /**
   * @param {Model|Object=} modelOrObject
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.patchAndFetch = function patchAndFetch(modelOrObject) {
    var delegateOperation = this._patchOperationFactory(this);

    if (!(delegateOperation.instance instanceof this._modelClass)) {
      throw new Error('patchAndFetch can only be called for instance operations');
    }

    var patchAndFetch = new _UpdateAndFetchOperation2.default('patchAndFetch', {
      delegate: delegateOperation
    });

    return this.callQueryBuilderOperation(patchAndFetch, [delegateOperation.instance.$id(), modelOrObject]);
  };

  /**
   * @param {number|string|Array.<number|string>} id
   * @param {Model|Object=} modelOrObject
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.patchAndFetchById = function patchAndFetchById(id, modelOrObject) {
    var patchAndFetch = new _UpdateAndFetchOperation2.default('patchAndFetch', {
      delegate: this._patchOperationFactory(this)
    });

    return this.callQueryBuilderOperation(patchAndFetch, [id, modelOrObject]);
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.delete = function _delete() {
    var deleteOperation = this._deleteOperationFactory(this);
    return this.callQueryBuilderOperation(deleteOperation, []);
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.del = function del() {
    return this.delete();
  };

  /**
   * @param {number|string|Array.<number|string>} id
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.deleteById = function deleteById(id) {
    return this.delete().whereComposite(this._modelClass.getFullIdColumn(), id);
  };

  /**
   * @param {number|string|object|Array.<number|string>|Array.<Array.<number|string>>|Array.<object>} ids
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.relate = function relate(ids) {
    var relateOperation = this._relateOperationFactory(this);
    return this.callQueryBuilderOperation(relateOperation, [ids]);
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.unrelate = function unrelate() {
    var unrelateOperation = this._unrelateOperationFactory(this);
    return this.callQueryBuilderOperation(unrelateOperation, []);
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.increment = function increment(propertyName, howMuch) {
    var patch = {};
    var columnName = this._modelClass.propertyNameToColumnName(propertyName);
    patch[propertyName] = this.knex().raw('?? + ?', [columnName, howMuch]);
    return this.patch(patch);
  };

  /**
   * @returns {QueryBuilder}
   */


  QueryBuilder.prototype.decrement = function decrement(propertyName, howMuch) {
    var patch = {};
    var columnName = this._modelClass.propertyNameToColumnName(propertyName);
    patch[propertyName] = this.knex().raw('?? - ?', [columnName, howMuch]);
    return this.patch(patch);
  };

  return QueryBuilder;
}(_QueryBuilderBase3.default), (_applyDecoratedDescriptor(_class.prototype, 'runBefore', [_dec], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'runBefore'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'onBuild', [_dec2], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'onBuild'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'runAfter', [_dec3], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'runAfter'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'joinRelation', [_dec4], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'joinRelation'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'innerJoinRelation', [_dec5], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'innerJoinRelation'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'outerJoinRelation', [_dec6], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'outerJoinRelation'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'leftJoinRelation', [_dec7], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'leftJoinRelation'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'leftOuterJoinRelation', [_dec8], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'leftOuterJoinRelation'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'rightJoinRelation', [_dec9], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'rightJoinRelation'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'rightOuterJoinRelation', [_dec10], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'rightOuterJoinRelation'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'fullOuterJoinRelation', [_dec11], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'fullOuterJoinRelation'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'insert', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'insert'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'insertAndFetch', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'insertAndFetch'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'insertGraph', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'insertGraph'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'insertGraphAndFetch', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'insertGraphAndFetch'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'update', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'update'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'updateAndFetch', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'updateAndFetch'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'updateAndFetchById', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'updateAndFetchById'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'patch', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'patch'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'patchAndFetch', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'patchAndFetch'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'patchAndFetchById', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'patchAndFetchById'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'delete', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'delete'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'relate', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'relate'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'unrelate', [writeQueryOperation], (0, _getOwnPropertyDescriptor2.default)(_class.prototype, 'unrelate'), _class.prototype)), _class));
exports.default = QueryBuilder;


function writeQueryOperation(target, property, descriptor) {
  var func = descriptor.value;

  descriptor.value = function decorator$writeQueryOperation() {
    if (!this.isFindQuery()) {
      return this.reject(new Error('Double call to a write method. ' + 'You can only call one of the write methods ' + '(insert, update, patch, delete, relate, unrelate, increment, decrement) ' + 'and only once per query builder.'));
    }

    try {
      func.apply(this, arguments);
    } catch (err) {
      this.reject(err);
    }

    return this;
  };
}

function checkEager(builder) {
  if (builder._eagerExpression && builder._allowedEagerExpression) {
    if (!builder._allowedEagerExpression.isSubExpression(builder._eagerExpression)) {
      builder.reject(new _ValidationError2.default({ eager: 'eager expression not allowed' }));
    }
  }
}

function createModels(result) {
  var builder = this.builder;

  if (result === null || result === undefined) {
    return null;
  }

  if (Array.isArray(result)) {
    if (result.length && (0, _typeof3.default)(result[0]) === 'object' && !(result[0] instanceof builder._modelClass)) {
      for (var i = 0, l = result.length; i < l; ++i) {
        result[i] = builder._modelClass.fromDatabaseJson(result[i]);
      }
    }
  } else if ((typeof result === 'undefined' ? 'undefined' : (0, _typeof3.default)(result)) === 'object' && !(result instanceof builder._modelClass)) {
    result = builder._modelClass.fromDatabaseJson(result);
  }

  return result;
}

function _build(builder) {
  var context = builder.context() || {};
  var internalContext = builder.internalContext();
  var knexBuilder = builder.knex().queryBuilder();

  callOnBuildHooks(builder, context.onBuild);
  callOnBuildHooks(builder, internalContext.onBuild);

  knexBuilder = builder.buildInto(knexBuilder);

  if (!builder.has(/from|table|into/)) {
    // Set the table only if it hasn't been explicitly set yet.
    knexBuilder.table(builder.modelClass().tableName);
  }

  return knexBuilder;
}

function chainHooks(promise, func) {
  if (_lodash2.default.isFunction(func)) {
    promise = promise.then(function (result) {
      return func.call(this.builder, result, this.builder);
    });
  } else if (Array.isArray(func)) {
    func.forEach(function (func) {
      promise = promise.then(function (result) {
        return func.call(this.builder, result, this.builder);
      });
    });
  }

  return promise;
}

function callOnBuildHooks(builder, func) {
  if (_lodash2.default.isFunction(func)) {
    func.call(builder, builder);
  } else if (_lodash2.default.isArray(func)) {
    for (var i = 0, l = func.length; i < l; ++i) {
      func[i].call(builder, builder);
    }
  }
}

function createHookCaller(hook) {
  var hasMethod = 'has' + _lodash2.default.upperFirst(hook);

  // Compile the caller function for (measured) performance boost.
  var caller = new Function('promise', 'op', '\n    if (op.' + hasMethod + '()) {\n      return promise.then(function (result) {\n        return op.' + hook + '(this.builder, result);\n      });\n    } else {\n      return promise;\n    }\n  ');

  return function (promise, operations) {
    for (var i = 0, l = operations.length; i < l; ++i) {
      promise = caller(promise, operations[i]);
    }

    return promise;
  };
}

function createOperationFactory(OperationClass, name, options) {
  return function () {
    return new OperationClass(name, options);
  };
}

var chainBeforeOperations = createHookCaller('onBefore');
var chainBeforeInternalOperations = createHookCaller('onBeforeInternal');
var chainRawResultOperations = createHookCaller('onRawResult');
var chainAfterQueryOperations = createHookCaller('onAfterQuery');
var chainAfterInternalOperations = createHookCaller('onAfterInternal');
var chainAfterOperations = createHookCaller('onAfter');

var findOperationFactory = createOperationFactory(_FindOperation2.default, 'find');
var insertOperationFactory = createOperationFactory(_InsertOperation2.default, 'insert');
var updateOperationFactory = createOperationFactory(_UpdateOperation2.default, 'update');
var patchOperationFactory = createOperationFactory(_UpdateOperation2.default, 'patch', { modelOptions: { patch: true } });
var relateOperationFactory = createOperationFactory(_QueryBuilderOperation2.default, 'relate');
var unrelateOperationFactory = createOperationFactory(_QueryBuilderOperation2.default, 'unrelate');
var deleteOperationFactory = createOperationFactory(_DeleteOperation2.default, 'delete');
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlF1ZXJ5QnVpbGRlci5qcyJdLCJuYW1lcyI6WyJRdWVyeUJ1aWxkZXIiLCJqb2luT3BlcmF0aW9uIiwibW9kZWxDbGFzcyIsImtuZXgiLCJfbW9kZWxDbGFzcyIsIl9leHBsaWNpdFJlamVjdFZhbHVlIiwiX2V4cGxpY2l0UmVzb2x2ZVZhbHVlIiwiX2VhZ2VyRXhwcmVzc2lvbiIsIl9lYWdlckZpbHRlckV4cHJlc3Npb25zIiwiX2FsbG93ZWRFYWdlckV4cHJlc3Npb24iLCJfYWxsb3dlZEluc2VydEV4cHJlc3Npb24iLCJfZmluZE9wZXJhdGlvbk9wdGlvbnMiLCJfZWFnZXJPcGVyYXRpb25PcHRpb25zIiwiX2ZpbmRPcGVyYXRpb25GYWN0b3J5IiwiZmluZE9wZXJhdGlvbkZhY3RvcnkiLCJfaW5zZXJ0T3BlcmF0aW9uRmFjdG9yeSIsImluc2VydE9wZXJhdGlvbkZhY3RvcnkiLCJfdXBkYXRlT3BlcmF0aW9uRmFjdG9yeSIsInVwZGF0ZU9wZXJhdGlvbkZhY3RvcnkiLCJfcGF0Y2hPcGVyYXRpb25GYWN0b3J5IiwicGF0Y2hPcGVyYXRpb25GYWN0b3J5IiwiX3JlbGF0ZU9wZXJhdGlvbkZhY3RvcnkiLCJyZWxhdGVPcGVyYXRpb25GYWN0b3J5IiwiX3VucmVsYXRlT3BlcmF0aW9uRmFjdG9yeSIsInVucmVsYXRlT3BlcmF0aW9uRmFjdG9yeSIsIl9kZWxldGVPcGVyYXRpb25GYWN0b3J5IiwiZGVsZXRlT3BlcmF0aW9uRmFjdG9yeSIsIl9lYWdlck9wZXJhdGlvbkZhY3RvcnkiLCJkZWZhdWx0RWFnZXJBbGdvcml0aG0iLCJmb3JDbGFzcyIsImNoaWxkUXVlcnlPZiIsInF1ZXJ5IiwiaW50ZXJuYWxDb250ZXh0IiwicmVqZWN0IiwiZXJyb3IiLCJyZXNvbHZlIiwidmFsdWUiLCJpc0V4ZWN1dGFibGUiLCJoYXNFeGVjdXRvciIsIl9xdWVyeUV4ZWN1dG9yT3BlcmF0aW9uIiwicnVuQmVmb3JlIiwib25CdWlsZCIsInJ1bkFmdGVyIiwiZWFnZXJBbGdvcml0aG0iLCJhbGdvcml0aG0iLCJlYWdlck9wdGlvbnMiLCJlYWdlck9wZXJhdGlvbkZhY3RvcnkiLCJmYWN0b3J5IiwiZWFnZXIiLCJleHAiLCJmaWx0ZXJzIiwiaXNTdHJpbmciLCJwYXJzZSIsImlzT2JqZWN0IiwiY2hlY2tFYWdlciIsImFsbG93RWFnZXIiLCJtb2RpZnlFYWdlciIsInBhdGgiLCJtb2RpZmllciIsInB1c2giLCJmaWx0ZXIiLCJmaWx0ZXJFYWdlciIsImFsbG93SW5zZXJ0Iiwib3B0Iiwib3BJZHgiLCJpbmRleE9mT3BlcmF0aW9uIiwiX29wZXJhdGlvbnMiLCJjbG9uZSIsImZpbmRPcHRpb25zIiwiaXNGaW5kUXVlcnkiLCJzb21lIiwibWV0aG9kIiwiaXNXcml0ZU9wZXJhdGlvbiIsInRvU3RyaW5nIiwiYnVpbGQiLCJ0b1NxbCIsImJ1aWxkZXIiLCJjb25zdHJ1Y3RvciIsImJhc2VDbG9uZUludG8iLCJzbGljZSIsImNsZWFyRWFnZXIiLCJjbGVhclJlamVjdCIsImNsZWFyUmVzb2x2ZSIsInRoZW4iLCJzdWNjZXNzSGFuZGxlciIsImVycm9ySGFuZGxlciIsInByb21pc2UiLCJleGVjdXRlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJtYXAiLCJtYXBwZXIiLCJjYXRjaCIsInJldHVybiIsInJldHVyblZhbHVlIiwiYmluZCIsImNvbnRleHQiLCJhc0NhbGxiYWNrIiwiY2FsbGJhY2siLCJub2RlaWZ5IiwicmVzdWx0U2l6ZSIsImNsZWFyIiwicmF3UXVlcnkiLCJyYXciLCJ3cmFwIiwiY291bnRRdWVyeSIsImNvdW50IiwiZnJvbSIsInJlc3VsdCIsInBhZ2UiLCJwYWdlU2l6ZSIsInJhbmdlIiwic3RhcnQiLCJlbmQiLCJyZXN1bHRTaXplUHJvbWlzZSIsImxpbWl0Iiwib2Zmc2V0IiwiYWxsIiwicmVzdWx0cyIsImFyciIsInRvdGFsIiwicGFyc2VJbnQiLCJfY2FsbEZpbmRPcGVyYXRpb24iLCJfY2FsbEVhZ2VyRmV0Y2hPcGVyYXRpb24iLCJrbmV4QnVpbGRlciIsInF1ZXJ5RXhlY3V0b3JPcGVyYXRpb24iLCJxdWVyeUV4ZWN1dG9yIiwicHJvbWlzZUN0eCIsImNoYWluQmVmb3JlT3BlcmF0aW9ucyIsImNoYWluSG9va3MiLCJjaGFpbkJlZm9yZUludGVybmFsT3BlcmF0aW9ucyIsImNoYWluUmF3UmVzdWx0T3BlcmF0aW9ucyIsImNyZWF0ZU1vZGVscyIsImNoYWluQWZ0ZXJRdWVyeU9wZXJhdGlvbnMiLCJjaGFpbkFmdGVySW50ZXJuYWxPcGVyYXRpb25zIiwiY2hhaW5BZnRlck9wZXJhdGlvbnMiLCJpIiwibCIsImxlbmd0aCIsIm9wIiwiaGFzUXVlcnlFeGVjdXRvciIsImhhcyIsIm9wZXJhdGlvbiIsIm1lcmdlIiwiY2FsbFF1ZXJ5QnVpbGRlck9wZXJhdGlvbiIsImRlZmF1bHRFYWdlck9wdGlvbnMiLCJwbHVjayIsInByb3BlcnR5TmFtZSIsImlzQXJyYXkiLCJmaXJzdCIsImhhc1NlbGVjdGlvbiIsInNlbGVjdGlvbiIsInRhYmxlIiwidGFibGVOYW1lIiwibm9TZWxlY3RTdGF0ZW1lbnRzIiwidHJhdmVyc2UiLCJ0cmF2ZXJzZXIiLCJpc1VuZGVmaW5lZCIsInBpY2siLCJwcm9wZXJ0aWVzIiwicmVkdWNlIiwib2JqIiwicHJvcCIsIm1vZGVsIiwiJHBpY2siLCJvbWl0IiwiJG9taXQiLCJqb2luUmVsYXRpb24iLCJyZWxhdGlvbk5hbWUiLCJpbm5lckpvaW5SZWxhdGlvbiIsIm91dGVySm9pblJlbGF0aW9uIiwibGVmdEpvaW5SZWxhdGlvbiIsImxlZnRPdXRlckpvaW5SZWxhdGlvbiIsInJpZ2h0Sm9pblJlbGF0aW9uIiwicmlnaHRPdXRlckpvaW5SZWxhdGlvbiIsImZ1bGxPdXRlckpvaW5SZWxhdGlvbiIsImZpbmRCeUlkIiwiaWQiLCJ3aGVyZUNvbXBvc2l0ZSIsImdldEZ1bGxJZENvbHVtbiIsIndpdGhTY2hlbWEiLCJzY2hlbWEiLCJjYWxsS25leFF1ZXJ5QnVpbGRlck9wZXJhdGlvbiIsImRlYnVnIiwiaW5zZXJ0IiwibW9kZWxzT3JPYmplY3RzIiwiaW5zZXJ0T3BlcmF0aW9uIiwiaW5zZXJ0QW5kRmV0Y2giLCJpbnNlcnRBbmRGZXRjaE9wZXJhdGlvbiIsImRlbGVnYXRlIiwiaW5zZXJ0R3JhcGgiLCJpbnNlcnRHcmFwaE9wZXJhdGlvbiIsImluc2VydFdpdGhSZWxhdGVkIiwiaW5zZXJ0R3JhcGhBbmRGZXRjaCIsImluc2VydEdyYXBoQW5kRmV0Y2hPcGVyYXRpb24iLCJpbnNlcnRXaXRoUmVsYXRlZEFuZEZldGNoIiwidXBkYXRlIiwibW9kZWxPck9iamVjdCIsInVwZGF0ZU9wZXJhdGlvbiIsInVwZGF0ZUFuZEZldGNoIiwiZGVsZWdhdGVPcGVyYXRpb24iLCJpbnN0YW5jZSIsIkVycm9yIiwiJGlkIiwidXBkYXRlQW5kRmV0Y2hCeUlkIiwicGF0Y2giLCJwYXRjaE9wZXJhdGlvbiIsInBhdGNoQW5kRmV0Y2giLCJwYXRjaEFuZEZldGNoQnlJZCIsImRlbGV0ZSIsImRlbGV0ZU9wZXJhdGlvbiIsImRlbCIsImRlbGV0ZUJ5SWQiLCJyZWxhdGUiLCJpZHMiLCJyZWxhdGVPcGVyYXRpb24iLCJ1bnJlbGF0ZSIsInVucmVsYXRlT3BlcmF0aW9uIiwiaW5jcmVtZW50IiwiaG93TXVjaCIsImNvbHVtbk5hbWUiLCJwcm9wZXJ0eU5hbWVUb0NvbHVtbk5hbWUiLCJkZWNyZW1lbnQiLCJ3cml0ZVF1ZXJ5T3BlcmF0aW9uIiwidGFyZ2V0IiwicHJvcGVydHkiLCJkZXNjcmlwdG9yIiwiZnVuYyIsImRlY29yYXRvciR3cml0ZVF1ZXJ5T3BlcmF0aW9uIiwiZXJyIiwiaXNTdWJFeHByZXNzaW9uIiwidW5kZWZpbmVkIiwiQXJyYXkiLCJmcm9tRGF0YWJhc2VKc29uIiwicXVlcnlCdWlsZGVyIiwiY2FsbE9uQnVpbGRIb29rcyIsImJ1aWxkSW50byIsImlzRnVuY3Rpb24iLCJjYWxsIiwiZm9yRWFjaCIsImNyZWF0ZUhvb2tDYWxsZXIiLCJob29rIiwiaGFzTWV0aG9kIiwidXBwZXJGaXJzdCIsImNhbGxlciIsIkZ1bmN0aW9uIiwib3BlcmF0aW9ucyIsImNyZWF0ZU9wZXJhdGlvbkZhY3RvcnkiLCJPcGVyYXRpb25DbGFzcyIsIm5hbWUiLCJvcHRpb25zIiwibW9kZWxPcHRpb25zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFFcUJBLFksV0E2RWxCLGtFLFVBT0EsZ0UsVUFPQSxpRSxVQXdvQkEscUNBQXNCLGtDQUF3QixFQUFDQyxlQUFlLE1BQWhCLEVBQXhCLENBQXRCLEMsVUFPQSxxQ0FBc0Isa0NBQXdCLEVBQUNBLGVBQWUsV0FBaEIsRUFBeEIsQ0FBdEIsQyxVQU9BLHFDQUFzQixrQ0FBd0IsRUFBQ0EsZUFBZSxXQUFoQixFQUF4QixDQUF0QixDLFVBT0EscUNBQXNCLGtDQUF3QixFQUFDQSxlQUFlLFVBQWhCLEVBQXhCLENBQXRCLEMsVUFPQSxxQ0FBc0Isa0NBQXdCLEVBQUNBLGVBQWUsZUFBaEIsRUFBeEIsQ0FBdEIsQyxVQU9BLHFDQUFzQixrQ0FBd0IsRUFBQ0EsZUFBZSxXQUFoQixFQUF4QixDQUF0QixDLFdBT0EscUNBQXNCLGtDQUF3QixFQUFDQSxlQUFlLGdCQUFoQixFQUF4QixDQUF0QixDLFdBT0EscUNBQXNCLGtDQUF3QixFQUFDQSxlQUFlLGVBQWhCLEVBQXhCLENBQXRCLEM7OztBQWx4QkQsd0JBQVlDLFVBQVosRUFBd0I7QUFBQTs7QUFBQSwrREFDdEIsNkJBQU1BLFdBQVdDLElBQVgsRUFBTixnQ0FEc0I7O0FBR3RCLFVBQUtDLFdBQUwsR0FBbUJGLFVBQW5CO0FBQ0EsVUFBS0csb0JBQUwsR0FBNEIsSUFBNUI7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RyxpQkFBaUIsa0JBQWpCLENBQXRDO0FBQ0EsSUFBTTdHLDJCQUEyQjZHLGlCQUFpQixhQUFqQixDQUFqQztBQUNBLElBQU0zRyw0QkFBNEIyRyxpQkFBaUIsY0FBakIsQ0FBbEM7QUFDQSxJQUFNMUcsK0JBQStCMEcsaUJBQWlCLGlCQUFqQixDQUFyQztBQUNBLElBQU16Ryx1QkFBdUJ5RyxpQkFBaUIsU0FBakIsQ0FBN0I7O0FBRUEsSUFBTWxPLHVCQUF1QnlPLGdEQUFzQyxNQUF0QyxDQUE3QjtBQUNBLElBQU12Tyx5QkFBeUJ1TyxrREFBd0MsUUFBeEMsQ0FBL0I7QUFDQSxJQUFNck8seUJBQXlCcU8sa0RBQXdDLFFBQXhDLENBQS9CO0FBQ0EsSUFBTW5PLHdCQUF3Qm1PLGtEQUF3QyxPQUF4QyxFQUFpRCxFQUFDSSxjQUFjLEVBQUM5QyxPQUFPLElBQVIsRUFBZixFQUFqRCxDQUE5QjtBQUNBLElBQU12TCx5QkFBeUJpTyx3REFBOEMsUUFBOUMsQ0FBL0I7QUFDQSxJQUFNL04sMkJBQTJCK04sd0RBQThDLFVBQTlDLENBQWpDO0FBQ0EsSUFBTTdOLHlCQUF5QjZOLGtEQUF3QyxRQUF4QyxDQUEvQiIsImZpbGUiOiJRdWVyeUJ1aWxkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFByb21pc2UgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHF1ZXJ5QnVpbGRlck9wZXJhdGlvbiBmcm9tICcuL2RlY29yYXRvcnMvcXVlcnlCdWlsZGVyT3BlcmF0aW9uJztcbmltcG9ydCBRdWVyeUJ1aWxkZXJDb250ZXh0IGZyb20gJy4vUXVlcnlCdWlsZGVyQ29udGV4dCc7XG5pbXBvcnQgUmVsYXRpb25FeHByZXNzaW9uIGZyb20gJy4vUmVsYXRpb25FeHByZXNzaW9uJztcbmltcG9ydCBRdWVyeUJ1aWxkZXJCYXNlIGZyb20gJy4vUXVlcnlCdWlsZGVyQmFzZSc7XG5pbXBvcnQgVmFsaWRhdGlvbkVycm9yIGZyb20gJy4uL1ZhbGlkYXRpb25FcnJvcic7XG5cbmltcG9ydCBGaW5kT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9GaW5kT3BlcmF0aW9uJztcbmltcG9ydCBEZWxldGVPcGVyYXRpb24gZnJvbSAnLi9vcGVyYXRpb25zL0RlbGV0ZU9wZXJhdGlvbic7XG5pbXBvcnQgVXBkYXRlT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9VcGRhdGVPcGVyYXRpb24nO1xuaW1wb3J0IEluc2VydE9wZXJhdGlvbiBmcm9tICcuL29wZXJhdGlvbnMvSW5zZXJ0T3BlcmF0aW9uJztcblxuaW1wb3J0IEluc2VydEdyYXBoQW5kRmV0Y2hPcGVyYXRpb24gZnJvbSAnLi9vcGVyYXRpb25zL0luc2VydEdyYXBoQW5kRmV0Y2hPcGVyYXRpb24nO1xuaW1wb3J0IEluc2VydEFuZEZldGNoT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9JbnNlcnRBbmRGZXRjaE9wZXJhdGlvbic7XG5pbXBvcnQgVXBkYXRlQW5kRmV0Y2hPcGVyYXRpb24gZnJvbSAnLi9vcGVyYXRpb25zL1VwZGF0ZUFuZEZldGNoT3BlcmF0aW9uJztcbmltcG9ydCBRdWVyeUJ1aWxkZXJPcGVyYXRpb24gZnJvbSAnLi9vcGVyYXRpb25zL1F1ZXJ5QnVpbGRlck9wZXJhdGlvbic7XG5pbXBvcnQgSm9pblJlbGF0aW9uT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9Kb2luUmVsYXRpb25PcGVyYXRpb24nO1xuaW1wb3J0IEluc2VydEdyYXBoT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9JbnNlcnRHcmFwaE9wZXJhdGlvbic7XG5pbXBvcnQgUnVuQmVmb3JlT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9SdW5CZWZvcmVPcGVyYXRpb24nO1xuaW1wb3J0IFJ1bkFmdGVyT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9SdW5BZnRlck9wZXJhdGlvbic7XG5pbXBvcnQgT25CdWlsZE9wZXJhdGlvbiBmcm9tICcuL29wZXJhdGlvbnMvT25CdWlsZE9wZXJhdGlvbic7XG5pbXBvcnQgU2VsZWN0T3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9TZWxlY3RPcGVyYXRpb24nO1xuaW1wb3J0IEVhZ2VyT3BlcmF0aW9uIGZyb20gJy4vb3BlcmF0aW9ucy9FYWdlck9wZXJhdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1ZXJ5QnVpbGRlciBleHRlbmRzIFF1ZXJ5QnVpbGRlckJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKG1vZGVsQ2xhc3MpIHtcbiAgICBzdXBlcihtb2RlbENsYXNzLmtuZXgoKSwgUXVlcnlCdWlsZGVyQ29udGV4dCk7XG5cbiAgICB0aGlzLl9tb2RlbENsYXNzID0gbW9kZWxDbGFzcztcbiAgICB0aGlzLl9leHBsaWNpdFJlamVjdFZhbHVlID0gbnVsbDtcbiAgICB0aGlzLl9leHBsaWNpdFJlc29sdmVWYWx1ZSA9IG51bGw7XG5cbiAgICB0aGlzLl9lYWdlckV4cHJlc3Npb24gPSBudWxsO1xuICAgIHRoaXMuX2VhZ2VyRmlsdGVyRXhwcmVzc2lvbnMgPSBbXTtcbiAgICB0aGlzLl9hbGxvd2VkRWFnZXJFeHByZXNzaW9uID0gbnVsbDtcbiAgICB0aGlzLl9hbGxvd2VkSW5zZXJ0RXhwcmVzc2lvbiA9IG51bGw7XG5cbiAgICB0aGlzLl9maW5kT3BlcmF0aW9uT3B0aW9ucyA9IHt9O1xuICAgIHRoaXMuX2VhZ2VyT3BlcmF0aW9uT3B0aW9ucyA9IHt9O1xuXG4gICAgdGhpcy5fZmluZE9wZXJhdGlvbkZhY3RvcnkgPSBmaW5kT3BlcmF0aW9uRmFjdG9yeTtcbiAgICB0aGlzLl9pbnNlcnRPcGVyYXRpb25GYWN0b3J5ID0gaW5zZXJ0T3BlcmF0aW9uRmFjdG9yeTtcbiAgICB0aGlzLl91cGRhdGVPcGVyYXRpb25GYWN0b3J5ID0gdXBkYXRlT3BlcmF0aW9uRmFjdG9yeTtcbiAgICB0aGlzLl9wYXRjaE9wZXJhdGlvbkZhY3RvcnkgPSBwYXRjaE9wZXJhdGlvbkZhY3Rvcnk7XG4gICAgdGhpcy5fcmVsYXRlT3BlcmF0aW9uRmFjdG9yeSA9IHJlbGF0ZU9wZXJhdGlvbkZhY3Rvcnk7XG4gICAgdGhpcy5fdW5yZWxhdGVPcGVyYXRpb25GYWN0b3J5ID0gdW5yZWxhdGVPcGVyYXRpb25GYWN0b3J5O1xuICAgIHRoaXMuX2RlbGV0ZU9wZXJhdGlvbkZhY3RvcnkgPSBkZWxldGVPcGVyYXRpb25GYWN0b3J5O1xuICAgIHRoaXMuX2VhZ2VyT3BlcmF0aW9uRmFjdG9yeSA9IG1vZGVsQ2xhc3MuZGVmYXVsdEVhZ2VyQWxnb3JpdGhtO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TW9kZWx9IG1vZGVsQ2xhc3NcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIHN0YXRpYyBmb3JDbGFzcyhtb2RlbENsYXNzKSB7XG4gICAgcmV0dXJuIG5ldyB0aGlzKG1vZGVsQ2xhc3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7UXVlcnlCdWlsZGVyQmFzZX0gcXVlcnlcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGNoaWxkUXVlcnlPZihxdWVyeSkge1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgdGhpcy5pbnRlcm5hbENvbnRleHQocXVlcnkuaW50ZXJuYWxDb250ZXh0KCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICByZWplY3QoZXJyb3IpIHtcbiAgICB0aGlzLl9leHBsaWNpdFJlamVjdFZhbHVlID0gZXJyb3I7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgcmVzb2x2ZSh2YWx1ZSkge1xuICAgIHRoaXMuX2V4cGxpY2l0UmVzb2x2ZVZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0V4ZWN1dGFibGUoKSB7XG4gICAgY29uc3QgaGFzRXhlY3V0b3IgPSAhIXRoaXMuX3F1ZXJ5RXhlY3V0b3JPcGVyYXRpb24oKTtcbiAgICByZXR1cm4gIXRoaXMuX2V4cGxpY2l0UmVqZWN0VmFsdWUgJiYgIXRoaXMuX2V4cGxpY2l0UmVzb2x2ZVZhbHVlICYmICFoYXNFeGVjdXRvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCosIFF1ZXJ5QnVpbGRlcil9IHJ1bkJlZm9yZVxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgQHF1ZXJ5QnVpbGRlck9wZXJhdGlvbihSdW5CZWZvcmVPcGVyYXRpb24pXG4gIHJ1bkJlZm9yZShydW5CZWZvcmUpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oUXVlcnlCdWlsZGVyKX0gb25CdWlsZFxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgQHF1ZXJ5QnVpbGRlck9wZXJhdGlvbihPbkJ1aWxkT3BlcmF0aW9uKVxuICBvbkJ1aWxkKG9uQnVpbGQpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oTW9kZWx8QXJyYXkuPE1vZGVsPiwgUXVlcnlCdWlsZGVyKX0gcnVuQWZ0ZXJcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEBxdWVyeUJ1aWxkZXJPcGVyYXRpb24oUnVuQWZ0ZXJPcGVyYXRpb24pXG4gIHJ1bkFmdGVyKHJ1bkFmdGVyKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFF1ZXJ5QnVpbGRlcik6RWFnZXJPcGVyYXRpb259IGFsZ29yaXRobVxuICAgKiBAcGFyYW0ge29iamVjdD19IGVhZ2VyT3B0aW9uc1xuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgZWFnZXJBbGdvcml0aG0oYWxnb3JpdGhtLCBlYWdlck9wdGlvbnMpIHtcbiAgICB0aGlzLmVhZ2VyT3BlcmF0aW9uRmFjdG9yeShhbGdvcml0aG0pO1xuXG4gICAgaWYgKGVhZ2VyT3B0aW9ucykge1xuICAgICAgdGhpcy5lYWdlck9wdGlvbnMoZWFnZXJPcHRpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFF1ZXJ5QnVpbGRlcik6RWFnZXJPcGVyYXRpb259IGZhY3RvcnlcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGVhZ2VyT3BlcmF0aW9uRmFjdG9yeShmYWN0b3J5KSB7XG4gICAgdGhpcy5fZWFnZXJPcGVyYXRpb25GYWN0b3J5ID0gZmFjdG9yeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFF1ZXJ5QnVpbGRlcik6UXVlcnlCdWlsZGVyT3BlcmF0aW9ufSBmYWN0b3J5XG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBmaW5kT3BlcmF0aW9uRmFjdG9yeShmYWN0b3J5KSB7XG4gICAgdGhpcy5fZmluZE9wZXJhdGlvbkZhY3RvcnkgPSBmYWN0b3J5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oUXVlcnlCdWlsZGVyKTpRdWVyeUJ1aWxkZXJPcGVyYXRpb259IGZhY3RvcnlcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGluc2VydE9wZXJhdGlvbkZhY3RvcnkoZmFjdG9yeSkge1xuICAgIHRoaXMuX2luc2VydE9wZXJhdGlvbkZhY3RvcnkgPSBmYWN0b3J5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oUXVlcnlCdWlsZGVyKTpRdWVyeUJ1aWxkZXJPcGVyYXRpb259IGZhY3RvcnlcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIHVwZGF0ZU9wZXJhdGlvbkZhY3RvcnkoZmFjdG9yeSkge1xuICAgIHRoaXMuX3VwZGF0ZU9wZXJhdGlvbkZhY3RvcnkgPSBmYWN0b3J5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oUXVlcnlCdWlsZGVyKTpRdWVyeUJ1aWxkZXJPcGVyYXRpb259IGZhY3RvcnlcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIHBhdGNoT3BlcmF0aW9uRmFjdG9yeShmYWN0b3J5KSB7XG4gICAgdGhpcy5fcGF0Y2hPcGVyYXRpb25GYWN0b3J5ID0gZmFjdG9yeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFF1ZXJ5QnVpbGRlcik6UXVlcnlCdWlsZGVyT3BlcmF0aW9ufSBmYWN0b3J5XG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBkZWxldGVPcGVyYXRpb25GYWN0b3J5KGZhY3RvcnkpIHtcbiAgICB0aGlzLl9kZWxldGVPcGVyYXRpb25GYWN0b3J5ID0gZmFjdG9yeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFF1ZXJ5QnVpbGRlcik6UXVlcnlCdWlsZGVyT3BlcmF0aW9ufSBmYWN0b3J5XG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICByZWxhdGVPcGVyYXRpb25GYWN0b3J5KGZhY3RvcnkpIHtcbiAgICB0aGlzLl9yZWxhdGVPcGVyYXRpb25GYWN0b3J5ID0gZmFjdG9yeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFF1ZXJ5QnVpbGRlcik6UXVlcnlCdWlsZGVyT3BlcmF0aW9ufSBmYWN0b3J5XG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICB1bnJlbGF0ZU9wZXJhdGlvbkZhY3RvcnkoZmFjdG9yeSkge1xuICAgIHRoaXMuX3VucmVsYXRlT3BlcmF0aW9uRmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVsYXRpb25FeHByZXNzaW9ufSBleHBcbiAgICogQHBhcmFtIHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24oUXVlcnlCdWlsZGVyKT49fSBmaWx0ZXJzXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBlYWdlcihleHAsIGZpbHRlcnMpIHtcbiAgICB0aGlzLl9lYWdlckV4cHJlc3Npb24gPSBleHAgfHwgbnVsbDtcblxuICAgIGlmIChfLmlzU3RyaW5nKHRoaXMuX2VhZ2VyRXhwcmVzc2lvbikpIHtcbiAgICAgIHRoaXMuX2VhZ2VyRXhwcmVzc2lvbiA9IFJlbGF0aW9uRXhwcmVzc2lvbi5wYXJzZSh0aGlzLl9lYWdlckV4cHJlc3Npb24pO1xuICAgIH1cblxuICAgIGlmIChfLmlzT2JqZWN0KGZpbHRlcnMpKSB7XG4gICAgICB0aGlzLl9lYWdlckV4cHJlc3Npb24uZmlsdGVycyA9IGZpbHRlcnM7XG4gICAgfVxuXG4gICAgY2hlY2tFYWdlcih0aGlzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWxhdGlvbkV4cHJlc3Npb259IGV4cFxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgYWxsb3dFYWdlcihleHApIHtcbiAgICB0aGlzLl9hbGxvd2VkRWFnZXJFeHByZXNzaW9uID0gZXhwIHx8IG51bGw7XG5cbiAgICBpZiAoXy5pc1N0cmluZyh0aGlzLl9hbGxvd2VkRWFnZXJFeHByZXNzaW9uKSkge1xuICAgICAgdGhpcy5fYWxsb3dlZEVhZ2VyRXhwcmVzc2lvbiA9IFJlbGF0aW9uRXhwcmVzc2lvbi5wYXJzZSh0aGlzLl9hbGxvd2VkRWFnZXJFeHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICBjaGVja0VhZ2VyKHRoaXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlbGF0aW9uRXhwcmVzc2lvbn0gcGF0aFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFF1ZXJ5QnVpbGRlcil9IG1vZGlmaWVyXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBtb2RpZnlFYWdlcihwYXRoLCBtb2RpZmllcikge1xuICAgIHRoaXMuX2VhZ2VyRmlsdGVyRXhwcmVzc2lvbnMucHVzaCh7XG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgZmlsdGVyOiBtb2RpZmllclxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBmaWx0ZXJFYWdlciguLi5hcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kaWZ5RWFnZXIoLi4uYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVsYXRpb25FeHByZXNzaW9ufSBleHBcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGFsbG93SW5zZXJ0KGV4cCkge1xuICAgIHRoaXMuX2FsbG93ZWRJbnNlcnRFeHByZXNzaW9uID0gZXhwIHx8IG51bGw7XG5cbiAgICBpZiAoXy5pc1N0cmluZyh0aGlzLl9hbGxvd2VkSW5zZXJ0RXhwcmVzc2lvbikpIHtcbiAgICAgIHRoaXMuX2FsbG93ZWRJbnNlcnRFeHByZXNzaW9uID0gUmVsYXRpb25FeHByZXNzaW9uLnBhcnNlKHRoaXMuX2FsbG93ZWRJbnNlcnRFeHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0XG4gICAqIEByZXR1cm4ge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGVhZ2VyT3B0aW9ucyhvcHQpIHtcbiAgICB0aGlzLl9lYWdlck9wZXJhdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9lYWdlck9wZXJhdGlvbk9wdGlvbnMsIG9wdCk7XG4gICAgY29uc3Qgb3BJZHggPSB0aGlzLmluZGV4T2ZPcGVyYXRpb24oRWFnZXJPcGVyYXRpb24pO1xuXG4gICAgaWYgKG9wSWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5fb3BlcmF0aW9uc1tvcElkeF0gPSB0aGlzLl9vcGVyYXRpb25zW29wSWR4XS5jbG9uZSh7XG4gICAgICAgIG9wdDogdGhpcy5fZmluZE9wZXJhdGlvbk9wdGlvbnNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRcbiAgICogQHJldHVybiB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgZmluZE9wdGlvbnMob3B0KSB7XG4gICAgdGhpcy5fZmluZE9wZXJhdGlvbk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9maW5kT3BlcmF0aW9uT3B0aW9ucywgb3B0KTtcbiAgICBjb25zdCBvcElkeCA9IHRoaXMuaW5kZXhPZk9wZXJhdGlvbihGaW5kT3BlcmF0aW9uKTtcblxuICAgIGlmIChvcElkeCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuX29wZXJhdGlvbnNbb3BJZHhdID0gdGhpcy5fb3BlcmF0aW9uc1tvcElkeF0uY2xvbmUoe1xuICAgICAgICBvcHQ6IHRoaXMuX2ZpbmRPcGVyYXRpb25PcHRpb25zXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Q29uc3RydWN0b3IuPE1vZGVsPn1cbiAgICovXG4gIG1vZGVsQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21vZGVsQ2xhc3M7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0ZpbmRRdWVyeSgpIHtcbiAgICByZXR1cm4gIV8uc29tZSh0aGlzLl9vcGVyYXRpb25zLCBtZXRob2QgPT4gbWV0aG9kLmlzV3JpdGVPcGVyYXRpb24pICYmICF0aGlzLl9leHBsaWNpdFJlamVjdFZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZCgpLnRvU3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHRvU3FsKCkge1xuICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGNsb25lKCkge1xuICAgIGNvbnN0IGJ1aWxkZXIgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl9tb2RlbENsYXNzKTtcbiAgICB0aGlzLmJhc2VDbG9uZUludG8oYnVpbGRlcik7XG5cbiAgICBidWlsZGVyLl9leHBsaWNpdFJlamVjdFZhbHVlID0gdGhpcy5fZXhwbGljaXRSZWplY3RWYWx1ZTtcbiAgICBidWlsZGVyLl9leHBsaWNpdFJlc29sdmVWYWx1ZSA9IHRoaXMuX2V4cGxpY2l0UmVzb2x2ZVZhbHVlO1xuXG4gICAgYnVpbGRlci5fZWFnZXJFeHByZXNzaW9uID0gdGhpcy5fZWFnZXJFeHByZXNzaW9uO1xuICAgIGJ1aWxkZXIuX2VhZ2VyRmlsdGVyRXhwcmVzc2lvbnMgPSB0aGlzLl9lYWdlckZpbHRlckV4cHJlc3Npb25zLnNsaWNlKCk7XG5cbiAgICBidWlsZGVyLl9hbGxvd2VkRWFnZXJFeHByZXNzaW9uID0gdGhpcy5fYWxsb3dlZEVhZ2VyRXhwcmVzc2lvbjtcbiAgICBidWlsZGVyLl9hbGxvd2VkSW5zZXJ0RXhwcmVzc2lvbiA9IHRoaXMuX2FsbG93ZWRJbnNlcnRFeHByZXNzaW9uO1xuXG4gICAgYnVpbGRlci5fZmluZE9wZXJhdGlvbk9wdGlvbnMgPSB0aGlzLl9maW5kT3BlcmF0aW9uT3B0aW9ucztcbiAgICBidWlsZGVyLl9lYWdlck9wZXJhdGlvbk9wdGlvbnMgPSB0aGlzLl9lYWdlck9wZXJhdGlvbk9wdGlvbnM7XG5cbiAgICBidWlsZGVyLl9maW5kT3BlcmF0aW9uRmFjdG9yeSA9IHRoaXMuX2ZpbmRPcGVyYXRpb25GYWN0b3J5O1xuICAgIGJ1aWxkZXIuX2luc2VydE9wZXJhdGlvbkZhY3RvcnkgPSB0aGlzLl9pbnNlcnRPcGVyYXRpb25GYWN0b3J5O1xuICAgIGJ1aWxkZXIuX3VwZGF0ZU9wZXJhdGlvbkZhY3RvcnkgPSB0aGlzLl91cGRhdGVPcGVyYXRpb25GYWN0b3J5O1xuICAgIGJ1aWxkZXIuX3BhdGNoT3BlcmF0aW9uRmFjdG9yeSA9IHRoaXMuX3BhdGNoT3BlcmF0aW9uRmFjdG9yeTtcbiAgICBidWlsZGVyLl9yZWxhdGVPcGVyYXRpb25GYWN0b3J5ID0gdGhpcy5fcmVsYXRlT3BlcmF0aW9uRmFjdG9yeTtcbiAgICBidWlsZGVyLl91bnJlbGF0ZU9wZXJhdGlvbkZhY3RvcnkgPSB0aGlzLl91bnJlbGF0ZU9wZXJhdGlvbkZhY3Rvcnk7XG4gICAgYnVpbGRlci5fZGVsZXRlT3BlcmF0aW9uRmFjdG9yeSA9IHRoaXMuX2RlbGV0ZU9wZXJhdGlvbkZhY3Rvcnk7XG4gICAgYnVpbGRlci5fZWFnZXJPcGVyYXRpb25GYWN0b3J5ID0gdGhpcy5fZWFnZXJPcGVyYXRpb25GYWN0b3J5O1xuXG4gICAgcmV0dXJuIGJ1aWxkZXI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGNsZWFyRWFnZXIoKSB7XG4gICAgdGhpcy5fZWFnZXJFeHByZXNzaW9uID0gbnVsbDtcbiAgICB0aGlzLl9lYWdlckZpbHRlckV4cHJlc3Npb25zID0gW107XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGNsZWFyUmVqZWN0KCkge1xuICAgIHRoaXMuX2V4cGxpY2l0UmVqZWN0VmFsdWUgPSBudWxsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBjbGVhclJlc29sdmUoKSB7XG4gICAgdGhpcy5fZXhwbGljaXRSZXNvbHZlVmFsdWUgPSBudWxsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBzdWNjZXNzSGFuZGxlclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uPX0gZXJyb3JIYW5kbGVyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgdGhlbihzdWNjZXNzSGFuZGxlciwgZXJyb3JIYW5kbGVyKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLmV4ZWN1dGUoKTtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuLmFwcGx5KHByb21pc2UsIGFyZ3VtZW50cyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWFwcGVyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgbWFwKG1hcHBlcikge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5leGVjdXRlKCk7XG4gICAgcmV0dXJuIHByb21pc2UubWFwLmFwcGx5KHByb21pc2UsIGFyZ3VtZW50cyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZXJyb3JIYW5kbGVyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgY2F0Y2goZXJyb3JIYW5kbGVyKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzLmV4ZWN1dGUoKTtcbiAgICByZXR1cm4gcHJvbWlzZS5jYXRjaC5hcHBseShwcm9taXNlLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gcmV0dXJuVmFsdWVcbiAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAqL1xuICByZXR1cm4ocmV0dXJuVmFsdWUpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuZXhlY3V0ZSgpO1xuICAgIHJldHVybiBwcm9taXNlLnJldHVybi5hcHBseShwcm9taXNlLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gY29udGV4dFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICovXG4gIGJpbmQoY29udGV4dCkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5leGVjdXRlKCk7XG4gICAgcmV0dXJuIHByb21pc2UuYmluZC5hcHBseShwcm9taXNlLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgYXNDYWxsYmFjayhjYWxsYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5leGVjdXRlKCk7XG4gICAgcmV0dXJuIHByb21pc2UuYXNDYWxsYmFjay5hcHBseShwcm9taXNlLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgbm9kZWlmeShjYWxsYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5leGVjdXRlKCk7XG4gICAgcmV0dXJuIHByb21pc2Uubm9kZWlmeS5hcHBseShwcm9taXNlLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgKi9cbiAgcmVzdWx0U2l6ZSgpIHtcbiAgICBjb25zdCBrbmV4ID0gdGhpcy5rbmV4KCk7XG5cbiAgICAvLyBvcmRlckJ5IGlzIHVzZWxlc3MgaGVyZSBhbmQgaXQgY2FuIG1ha2UgdGhpbmdzIGEgbG90IHNsb3dlciAoYXQgbGVhc3Qgd2l0aCBwb3N0Z3Jlc3FsIDkuMykuXG4gICAgLy8gUmVtb3ZlIGl0IGZyb20gdGhlIGNvdW50IHF1ZXJ5LiBXZSBhbHNvIHJlbW92ZSB0aGUgb2Zmc2V0IGFuZCBsaW1pdFxuICAgIGxldCBxdWVyeSA9IHRoaXMuY2xvbmUoKS5jbGVhcigvb3JkZXJCeXxvZmZzZXR8bGltaXQvKS5idWlsZCgpO1xuICAgIGxldCByYXdRdWVyeSA9IGtuZXgucmF3KHF1ZXJ5KS53cmFwKCcoJywgJykgYXMgdGVtcCcpO1xuICAgIGxldCBjb3VudFF1ZXJ5ID0ga25leC5jb3VudCgnKiBhcyBjb3VudCcpLmZyb20ocmF3UXVlcnkpO1xuXG4gICAgcmV0dXJuIGNvdW50UXVlcnkudGhlbihyZXN1bHQgPT4gcmVzdWx0WzBdID8gcmVzdWx0WzBdLmNvdW50IDogMCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VTaXplXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBwYWdlKHBhZ2UsIHBhZ2VTaXplKSB7XG4gICAgcmV0dXJuIHRoaXMucmFuZ2UocGFnZSAqIHBhZ2VTaXplLCAocGFnZSArIDEpICogcGFnZVNpemUgLSAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZFxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgcmFuZ2Uoc3RhcnQsIGVuZCkge1xuICAgIGxldCByZXN1bHRTaXplUHJvbWlzZTtcblxuICAgIHJldHVybiB0aGlzXG4gICAgICAubGltaXQoZW5kIC0gc3RhcnQgKyAxKVxuICAgICAgLm9mZnNldChzdGFydClcbiAgICAgIC5ydW5CZWZvcmUoKCkgPT4ge1xuICAgICAgICAvLyBEb24ndCByZXR1cm4gdGhlIHByb21pc2Ugc28gdGhhdCBpdCBpcyBleGVjdXRlZFxuICAgICAgICAvLyBpbiBwYXJhbGxlbCB3aXRoIHRoZSBhY3R1YWwgcXVlcnkuXG4gICAgICAgIHJlc3VsdFNpemVQcm9taXNlID0gdGhpcy5yZXN1bHRTaXplKCk7XG4gICAgICB9KVxuICAgICAgLnJ1bkFmdGVyKHJlc3VsdHMgPT4ge1xuICAgICAgICAvLyBOb3cgdGhhdCB0aGUgYWN0dWFsIHF1ZXJ5IGlzIGZpbmlzaGVkLCB3YWl0IHVudGlsIHRoZVxuICAgICAgICAvLyByZXN1bHQgc2l6ZSBoYXMgYmVlbiBjYWxjdWxhdGVkLlxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3Jlc3VsdHMsIHJlc3VsdFNpemVQcm9taXNlXSk7XG4gICAgICB9KVxuICAgICAgLnJ1bkFmdGVyKGFyciA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVzdWx0czogYXJyWzBdLFxuICAgICAgICAgIHRvdGFsOiBfLnBhcnNlSW50KGFyclsxXSlcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7a25leC5RdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBidWlsZCgpIHtcbiAgICAvLyBUYWtlIGEgY2xvbmUgc28gdGhhdCB3ZSBkb24ndCBtb2RpZnkgdGhpcyBpbnN0YW5jZSBkdXJpbmcgYnVpbGQuXG4gICAgY29uc3QgYnVpbGRlciA9IHRoaXMuY2xvbmUoKTtcblxuICAgIGlmIChidWlsZGVyLmlzRmluZFF1ZXJ5KCkpIHtcbiAgICAgIC8vIElmIG5vIHdyaXRlIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIGNhbGxlZCBhdCB0aGlzIHBvaW50IHRoaXMgcXVlcnkgaXMgYVxuICAgICAgLy8gZmluZCBxdWVyeSBhbmQgd2UgbmVlZCB0byBjYWxsIHRoZSBjdXN0b20gZmluZCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIGJ1aWxkZXIuX2NhbGxGaW5kT3BlcmF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKGJ1aWxkZXIuX2VhZ2VyRXhwcmVzc2lvbikge1xuICAgICAgYnVpbGRlci5fY2FsbEVhZ2VyRmV0Y2hPcGVyYXRpb24oKTtcbiAgICB9XG5cbiAgICAvLyBXZSBuZWVkIHRvIGJ1aWxkIHRoZSBidWlsZGVyIGV2ZW4gaWYgYSBxdWVyeSBleGVjdXRvciBvcGVyYXRpb25cbiAgICAvLyBoYXMgYmVlbiBjYWxsZWQgc28gdGhhdCB0aGUgb25CdWlsZCBob29rcyBnZXQgY2FsbGVkLlxuICAgIGNvbnN0IGtuZXhCdWlsZGVyID0gYnVpbGQoYnVpbGRlcik7XG4gICAgY29uc3QgcXVlcnlFeGVjdXRvck9wZXJhdGlvbiA9IGJ1aWxkZXIuX3F1ZXJ5RXhlY3V0b3JPcGVyYXRpb24oKTtcblxuICAgIGlmIChxdWVyeUV4ZWN1dG9yT3BlcmF0aW9uKSB7XG4gICAgICAvLyBJZiB0aGUgcXVlcnkgZXhlY3V0b3IgaXMgc2V0LCB3ZSBidWlsZCB0aGUgYnVpbGRlciB0aGF0IGl0IHJldHVybnMuXG4gICAgICByZXR1cm4gcXVlcnlFeGVjdXRvck9wZXJhdGlvbi5xdWVyeUV4ZWN1dG9yKGJ1aWxkZXIpLmJ1aWxkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBrbmV4QnVpbGRlcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAqL1xuICBleGVjdXRlKCkge1xuICAgIC8vIFRha2UgYSBjbG9uZSBzbyB0aGF0IHdlIGRvbid0IG1vZGlmeSB0aGlzIGluc3RhbmNlIGR1cmluZyBleGVjdXRpb24uXG4gICAgbGV0IGJ1aWxkZXIgPSB0aGlzLmNsb25lKCk7XG4gICAgbGV0IHByb21pc2VDdHggPSB7YnVpbGRlcjogYnVpbGRlcn07XG4gICAgbGV0IHByb21pc2UgPSBQcm9taXNlLmJpbmQocHJvbWlzZUN0eCk7XG4gICAgbGV0IGNvbnRleHQgPSBidWlsZGVyLmNvbnRleHQoKSB8fCB7fTtcbiAgICBsZXQgaW50ZXJuYWxDb250ZXh0ID0gYnVpbGRlci5pbnRlcm5hbENvbnRleHQoKTtcblxuICAgIGlmIChidWlsZGVyLmlzRmluZFF1ZXJ5KCkpIHtcbiAgICAgIC8vIElmIG5vIHdyaXRlIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIGNhbGxlZCBhdCB0aGlzIHBvaW50IHRoaXMgcXVlcnkgaXMgYVxuICAgICAgLy8gZmluZCBxdWVyeSBhbmQgd2UgbmVlZCB0byBjYWxsIHRoZSBjdXN0b20gZmluZCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIGJ1aWxkZXIuX2NhbGxGaW5kT3BlcmF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKGJ1aWxkZXIuX2VhZ2VyRXhwcmVzc2lvbikge1xuICAgICAgYnVpbGRlci5fY2FsbEVhZ2VyRmV0Y2hPcGVyYXRpb24oKTtcbiAgICB9XG5cbiAgICBwcm9taXNlID0gY2hhaW5CZWZvcmVPcGVyYXRpb25zKHByb21pc2UsIGJ1aWxkZXIuX29wZXJhdGlvbnMpO1xuICAgIHByb21pc2UgPSBjaGFpbkhvb2tzKHByb21pc2UsIGNvbnRleHQucnVuQmVmb3JlKTtcbiAgICBwcm9taXNlID0gY2hhaW5Ib29rcyhwcm9taXNlLCBpbnRlcm5hbENvbnRleHQucnVuQmVmb3JlKTtcbiAgICBwcm9taXNlID0gY2hhaW5CZWZvcmVJbnRlcm5hbE9wZXJhdGlvbnMocHJvbWlzZSwgYnVpbGRlci5fb3BlcmF0aW9ucyk7XG5cbiAgICAvLyBSZXNvbHZlIGFsbCBiZWZvcmUgaG9va3MgYmVmb3JlIGJ1aWxkaW5nIGFuZCBleGVjdXRpbmcgdGhlIHF1ZXJ5XG4gICAgLy8gYW5kIHRoZSByZXN0IG9mIHRoZSBob29rcy5cbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHByb21pc2VDdHggPSB0aGlzO1xuICAgICAgY29uc3QgYnVpbGRlciA9IHByb21pc2VDdHguYnVpbGRlcjtcblxuICAgICAgbGV0IHByb21pc2UgPSBudWxsO1xuICAgICAgbGV0IGtuZXhCdWlsZGVyID0gYnVpbGQoYnVpbGRlcik7XG4gICAgICBsZXQgcXVlcnlFeGVjdXRvck9wZXJhdGlvbiA9IGJ1aWxkZXIuX3F1ZXJ5RXhlY3V0b3JPcGVyYXRpb24oKTtcblxuICAgICAgaWYgKGJ1aWxkZXIuX2V4cGxpY2l0UmVqZWN0VmFsdWUpIHtcbiAgICAgICAgcHJvbWlzZSAgPSBQcm9taXNlLnJlamVjdChidWlsZGVyLl9leHBsaWNpdFJlamVjdFZhbHVlKS5iaW5kKHByb21pc2VDdHgpO1xuICAgICAgfSBlbHNlIGlmIChidWlsZGVyLl9leHBsaWNpdFJlc29sdmVWYWx1ZSkge1xuICAgICAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGJ1aWxkZXIuX2V4cGxpY2l0UmVzb2x2ZVZhbHVlKS5iaW5kKHByb21pc2VDdHgpO1xuICAgICAgfSBlbHNlIGlmIChxdWVyeUV4ZWN1dG9yT3BlcmF0aW9uKSB7XG4gICAgICAgIHByb21pc2UgPSBxdWVyeUV4ZWN1dG9yT3BlcmF0aW9uLnF1ZXJ5RXhlY3V0b3IoYnVpbGRlcikuYmluZChwcm9taXNlQ3R4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2UgPSBrbmV4QnVpbGRlci5iaW5kKHByb21pc2VDdHgpO1xuICAgICAgICBwcm9taXNlID0gY2hhaW5SYXdSZXN1bHRPcGVyYXRpb25zKHByb21pc2UsIGJ1aWxkZXIuX29wZXJhdGlvbnMpO1xuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNyZWF0ZU1vZGVscyk7XG4gICAgICB9XG5cbiAgICAgIHByb21pc2UgPSBjaGFpbkFmdGVyUXVlcnlPcGVyYXRpb25zKHByb21pc2UsIGJ1aWxkZXIuX29wZXJhdGlvbnMpO1xuICAgICAgcHJvbWlzZSA9IGNoYWluQWZ0ZXJJbnRlcm5hbE9wZXJhdGlvbnMocHJvbWlzZSwgYnVpbGRlci5fb3BlcmF0aW9ucyk7XG4gICAgICBwcm9taXNlID0gY2hhaW5Ib29rcyhwcm9taXNlLCBjb250ZXh0LnJ1bkFmdGVyKTtcbiAgICAgIHByb21pc2UgPSBjaGFpbkhvb2tzKHByb21pc2UsIGludGVybmFsQ29udGV4dC5ydW5BZnRlcik7XG4gICAgICBwcm9taXNlID0gY2hhaW5BZnRlck9wZXJhdGlvbnMocHJvbWlzZSwgYnVpbGRlci5fb3BlcmF0aW9ucyk7XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJPcGVyYXRpb259XG4gICAqL1xuICBfcXVlcnlFeGVjdXRvck9wZXJhdGlvbigpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMuX29wZXJhdGlvbnMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICBjb25zdCBvcCA9IHRoaXMuX29wZXJhdGlvbnNbaV07XG5cbiAgICAgIGlmIChvcC5oYXNRdWVyeUV4ZWN1dG9yKCkpIHtcbiAgICAgICAgcmV0dXJuIG9wO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY2FsbEZpbmRPcGVyYXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmhhcyhGaW5kT3BlcmF0aW9uKSkge1xuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gdGhpcy5fZmluZE9wZXJhdGlvbkZhY3RvcnkodGhpcyk7XG5cbiAgICAgIG9wZXJhdGlvbi5vcHQgPSBfLm1lcmdlKG9wZXJhdGlvbi5vcHQsXG4gICAgICAgIHRoaXMuX2ZpbmRPcGVyYXRpb25PcHRpb25zXG4gICAgICApO1xuXG4gICAgICB0aGlzLmNhbGxRdWVyeUJ1aWxkZXJPcGVyYXRpb24ob3BlcmF0aW9uLCBbXSwgLyogcHVzaEZyb250ID0gKi8gdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY2FsbEVhZ2VyRmV0Y2hPcGVyYXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmhhcyhFYWdlck9wZXJhdGlvbikgJiYgdGhpcy5fZWFnZXJFeHByZXNzaW9uKSB7XG4gICAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLl9lYWdlck9wZXJhdGlvbkZhY3RvcnkodGhpcyk7XG5cbiAgICAgIG9wZXJhdGlvbi5vcHQgPSBfLm1lcmdlKG9wZXJhdGlvbi5vcHQsXG4gICAgICAgIHRoaXMuX21vZGVsQ2xhc3MuZGVmYXVsdEVhZ2VyT3B0aW9ucyxcbiAgICAgICAgdGhpcy5fZWFnZXJPcGVyYXRpb25PcHRpb25zXG4gICAgICApO1xuXG4gICAgICB0aGlzLmNhbGxRdWVyeUJ1aWxkZXJPcGVyYXRpb24ob3BlcmF0aW9uLCBbXG4gICAgICAgIHRoaXMuX2VhZ2VyRXhwcmVzc2lvbixcbiAgICAgICAgdGhpcy5fZWFnZXJGaWx0ZXJFeHByZXNzaW9uc1xuICAgICAgXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eU5hbWVcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIHBsdWNrKHByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiB0aGlzLnJ1bkFmdGVyKHJlc3VsdCA9PiB7XG4gICAgICBpZiAoXy5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIF8ubWFwKHJlc3VsdCwgcHJvcGVydHlOYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGZpcnN0KCkge1xuICAgIHJldHVybiB0aGlzLnJ1bkFmdGVyKHJlc3VsdCA9PiB7XG4gICAgICBpZiAoXy5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTZWxlY3Rpb24oc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgdGFibGUgPSB0aGlzLm1vZGVsQ2xhc3MoKS50YWJsZU5hbWU7XG4gICAgbGV0IG5vU2VsZWN0U3RhdGVtZW50cyA9IHRydWU7XG5cbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMuX29wZXJhdGlvbnMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICBjb25zdCBvcCA9IHRoaXMuX29wZXJhdGlvbnNbaV07XG5cbiAgICAgIGlmIChvcCBpbnN0YW5jZW9mIFNlbGVjdE9wZXJhdGlvbikge1xuICAgICAgICBub1NlbGVjdFN0YXRlbWVudHMgPSBmYWxzZTtcblxuICAgICAgICBpZiAob3AuaGFzU2VsZWN0aW9uKHRhYmxlLCBzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobm9TZWxlY3RTdGF0ZW1lbnRzKSB7XG4gICAgICAvLyBJbXBsaWNpdCBgc2VsZWN0ICpgLlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtDb25zdHJ1Y3Rvci48TW9kZWw+PX0gbW9kZWxDbGFzc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKE1vZGVsLCBNb2RlbCwgc3RyaW5nKX0gdHJhdmVyc2VyXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICB0cmF2ZXJzZShtb2RlbENsYXNzLCB0cmF2ZXJzZXIpIHtcbiAgICBpZiAoXy5pc1VuZGVmaW5lZCh0cmF2ZXJzZXIpKSB7XG4gICAgICB0cmF2ZXJzZXIgPSBtb2RlbENsYXNzO1xuICAgICAgbW9kZWxDbGFzcyA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucnVuQWZ0ZXIocmVzdWx0ID0+IHtcbiAgICAgIHRoaXMuX21vZGVsQ2xhc3MudHJhdmVyc2UobW9kZWxDbGFzcywgcmVzdWx0LCB0cmF2ZXJzZXIpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0NvbnN0cnVjdG9yLjxNb2RlbD49fSBtb2RlbENsYXNzXG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHByb3BlcnRpZXNcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIHBpY2sobW9kZWxDbGFzcywgcHJvcGVydGllcykge1xuICAgIGlmIChfLmlzVW5kZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgICBwcm9wZXJ0aWVzID0gbW9kZWxDbGFzcztcbiAgICAgIG1vZGVsQ2xhc3MgPSBudWxsO1xuICAgIH1cblxuICAgIHByb3BlcnRpZXMgPSBfLnJlZHVjZShwcm9wZXJ0aWVzLCAob2JqLCBwcm9wKSA9PiB7XG4gICAgICBvYmpbcHJvcF0gPSB0cnVlO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG5cbiAgICByZXR1cm4gdGhpcy50cmF2ZXJzZShtb2RlbENsYXNzLCBtb2RlbCA9PiB7XG4gICAgICBtb2RlbC4kcGljayhwcm9wZXJ0aWVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0NvbnN0cnVjdG9yLjxNb2RlbD49fSBtb2RlbENsYXNzXG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHByb3BlcnRpZXNcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIG9taXQobW9kZWxDbGFzcywgcHJvcGVydGllcykge1xuICAgIGlmIChfLmlzVW5kZWZpbmVkKHByb3BlcnRpZXMpKSB7XG4gICAgICBwcm9wZXJ0aWVzID0gbW9kZWxDbGFzcztcbiAgICAgIG1vZGVsQ2xhc3MgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFR1cm4gdGhlIHByb3BlcnRpZXMgaW50byBhIGhhc2ggZm9yIHBlcmZvcm1hbmNlLlxuICAgIHByb3BlcnRpZXMgPSBfLnJlZHVjZShwcm9wZXJ0aWVzLCAob2JqLCBwcm9wKSA9PiB7XG4gICAgICBvYmpbcHJvcF0gPSB0cnVlO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LCB7fSk7XG5cbiAgICByZXR1cm4gdGhpcy50cmF2ZXJzZShtb2RlbENsYXNzLCBtb2RlbCA9PiB7XG4gICAgICBtb2RlbC4kb21pdChwcm9wZXJ0aWVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpb25OYW1lXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBAcXVlcnlCdWlsZGVyT3BlcmF0aW9uKFtKb2luUmVsYXRpb25PcGVyYXRpb24sIHtqb2luT3BlcmF0aW9uOiAnam9pbid9XSlcbiAgam9pblJlbGF0aW9uKHJlbGF0aW9uTmFtZSkge31cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aW9uTmFtZVxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgQHF1ZXJ5QnVpbGRlck9wZXJhdGlvbihbSm9pblJlbGF0aW9uT3BlcmF0aW9uLCB7am9pbk9wZXJhdGlvbjogJ2lubmVySm9pbid9XSlcbiAgaW5uZXJKb2luUmVsYXRpb24ocmVsYXRpb25OYW1lKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpb25OYW1lXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBAcXVlcnlCdWlsZGVyT3BlcmF0aW9uKFtKb2luUmVsYXRpb25PcGVyYXRpb24sIHtqb2luT3BlcmF0aW9uOiAnb3V0ZXJKb2luJ31dKVxuICBvdXRlckpvaW5SZWxhdGlvbihyZWxhdGlvbk5hbWUpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGlvbk5hbWVcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEBxdWVyeUJ1aWxkZXJPcGVyYXRpb24oW0pvaW5SZWxhdGlvbk9wZXJhdGlvbiwge2pvaW5PcGVyYXRpb246ICdsZWZ0Sm9pbid9XSlcbiAgbGVmdEpvaW5SZWxhdGlvbihyZWxhdGlvbk5hbWUpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGlvbk5hbWVcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEBxdWVyeUJ1aWxkZXJPcGVyYXRpb24oW0pvaW5SZWxhdGlvbk9wZXJhdGlvbiwge2pvaW5PcGVyYXRpb246ICdsZWZ0T3V0ZXJKb2luJ31dKVxuICBsZWZ0T3V0ZXJKb2luUmVsYXRpb24ocmVsYXRpb25OYW1lKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpb25OYW1lXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBAcXVlcnlCdWlsZGVyT3BlcmF0aW9uKFtKb2luUmVsYXRpb25PcGVyYXRpb24sIHtqb2luT3BlcmF0aW9uOiAncmlnaHRKb2luJ31dKVxuICByaWdodEpvaW5SZWxhdGlvbihyZWxhdGlvbk5hbWUpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGlvbk5hbWVcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEBxdWVyeUJ1aWxkZXJPcGVyYXRpb24oW0pvaW5SZWxhdGlvbk9wZXJhdGlvbiwge2pvaW5PcGVyYXRpb246ICdyaWdodE91dGVySm9pbid9XSlcbiAgcmlnaHRPdXRlckpvaW5SZWxhdGlvbihyZWxhdGlvbk5hbWUpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGlvbk5hbWVcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEBxdWVyeUJ1aWxkZXJPcGVyYXRpb24oW0pvaW5SZWxhdGlvbk9wZXJhdGlvbiwge2pvaW5PcGVyYXRpb246ICdmdWxsT3V0ZXJKb2luJ31dKVxuICBmdWxsT3V0ZXJKb2luUmVsYXRpb24ocmVsYXRpb25OYW1lKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ8QXJyYXkuPHN0cmluZ3xudW1iZXI+fSBpZFxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgZmluZEJ5SWQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy53aGVyZUNvbXBvc2l0ZSh0aGlzLl9tb2RlbENsYXNzLmdldEZ1bGxJZENvbHVtbigpLCBpZCkuZmlyc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgd2l0aFNjaGVtYShzY2hlbWEpIHtcbiAgICB0aGlzLmludGVybmFsQ29udGV4dCgpLm9uQnVpbGQucHVzaChidWlsZGVyID0+IHtcbiAgICAgIGlmICghYnVpbGRlci5oYXMoL3dpdGhTY2hlbWEvKSkge1xuICAgICAgICAvLyBOZWVkIHRvIHB1c2ggdGhpcyBvcGVyYXRpb24gdG8gdGhlIGZyb250IGJlY2F1c2Uga25leCBkb2Vzbid0IHVzZSB0aGVcbiAgICAgICAgLy8gc2NoZW1hIGZvciBvcGVyYXRpb25zIGNhbGxlZCBiZWZvcmUgYHdpdGhTY2hlbWFgLlxuICAgICAgICBidWlsZGVyLmNhbGxLbmV4UXVlcnlCdWlsZGVyT3BlcmF0aW9uKCd3aXRoU2NoZW1hJywgW3NjaGVtYV0sIHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGRlYnVnKCkge1xuICAgIHRoaXMuaW50ZXJuYWxDb250ZXh0KCkub25CdWlsZC5wdXNoKGJ1aWxkZXIgPT4ge1xuICAgICAgYnVpbGRlci5jYWxsS25leFF1ZXJ5QnVpbGRlck9wZXJhdGlvbignZGVidWcnLCBbXSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdHxNb2RlbHxBcnJheS48T2JqZWN0PnxBcnJheS48TW9kZWw+fSBtb2RlbHNPck9iamVjdHNcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEB3cml0ZVF1ZXJ5T3BlcmF0aW9uXG4gIGluc2VydChtb2RlbHNPck9iamVjdHMpIHtcbiAgICBjb25zdCBpbnNlcnRPcGVyYXRpb24gPSB0aGlzLl9pbnNlcnRPcGVyYXRpb25GYWN0b3J5KHRoaXMpO1xuICAgIHJldHVybiB0aGlzLmNhbGxRdWVyeUJ1aWxkZXJPcGVyYXRpb24oaW5zZXJ0T3BlcmF0aW9uLCBbbW9kZWxzT3JPYmplY3RzXSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R8TW9kZWx8QXJyYXkuPE9iamVjdD58QXJyYXkuPE1vZGVsPn0gbW9kZWxzT3JPYmplY3RzXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBAd3JpdGVRdWVyeU9wZXJhdGlvblxuICBpbnNlcnRBbmRGZXRjaChtb2RlbHNPck9iamVjdHMpIHtcbiAgICBjb25zdCBpbnNlcnRBbmRGZXRjaE9wZXJhdGlvbiA9IG5ldyBJbnNlcnRBbmRGZXRjaE9wZXJhdGlvbignaW5zZXJ0QW5kRmV0Y2gnLCB7XG4gICAgICBkZWxlZ2F0ZTogdGhpcy5faW5zZXJ0T3BlcmF0aW9uRmFjdG9yeSh0aGlzKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY2FsbFF1ZXJ5QnVpbGRlck9wZXJhdGlvbihpbnNlcnRBbmRGZXRjaE9wZXJhdGlvbiwgW21vZGVsc09yT2JqZWN0c10pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fE1vZGVsfEFycmF5LjxPYmplY3Q+fEFycmF5LjxNb2RlbD59IG1vZGVsc09yT2JqZWN0c1xuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgQHdyaXRlUXVlcnlPcGVyYXRpb25cbiAgaW5zZXJ0R3JhcGgobW9kZWxzT3JPYmplY3RzKSB7XG4gICAgY29uc3QgaW5zZXJ0R3JhcGhPcGVyYXRpb24gPSBuZXcgSW5zZXJ0R3JhcGhPcGVyYXRpb24oJ2luc2VydEdyYXBoJywge1xuICAgICAgZGVsZWdhdGU6IHRoaXMuX2luc2VydE9wZXJhdGlvbkZhY3RvcnkodGhpcylcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmNhbGxRdWVyeUJ1aWxkZXJPcGVyYXRpb24oaW5zZXJ0R3JhcGhPcGVyYXRpb24sIFttb2RlbHNPck9iamVjdHNdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgaW5zZXJ0V2l0aFJlbGF0ZWQoLi4uYXJncykge1xuICAgIHJldHVybiB0aGlzLmluc2VydEdyYXBoKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fE1vZGVsfEFycmF5LjxPYmplY3Q+fEFycmF5LjxNb2RlbD59IG1vZGVsc09yT2JqZWN0c1xuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgQHdyaXRlUXVlcnlPcGVyYXRpb25cbiAgaW5zZXJ0R3JhcGhBbmRGZXRjaChtb2RlbHNPck9iamVjdHMpIHtcbiAgICBjb25zdCBpbnNlcnRHcmFwaEFuZEZldGNoT3BlcmF0aW9uID0gbmV3IEluc2VydEdyYXBoQW5kRmV0Y2hPcGVyYXRpb24oJ2luc2VydEdyYXBoQW5kRmV0Y2gnLCB7XG4gICAgICBkZWxlZ2F0ZTogbmV3IEluc2VydEdyYXBoT3BlcmF0aW9uKCdpbnNlcnRHcmFwaCcsIHtcbiAgICAgICAgZGVsZWdhdGU6IHRoaXMuX2luc2VydE9wZXJhdGlvbkZhY3RvcnkodGhpcylcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5jYWxsUXVlcnlCdWlsZGVyT3BlcmF0aW9uKGluc2VydEdyYXBoQW5kRmV0Y2hPcGVyYXRpb24sIFttb2RlbHNPck9iamVjdHNdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgaW5zZXJ0V2l0aFJlbGF0ZWRBbmRGZXRjaCguLi5hcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0R3JhcGhBbmRGZXRjaCguLi5hcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vZGVsfE9iamVjdD19IG1vZGVsT3JPYmplY3RcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEB3cml0ZVF1ZXJ5T3BlcmF0aW9uXG4gIHVwZGF0ZShtb2RlbE9yT2JqZWN0KSB7XG4gICAgY29uc3QgdXBkYXRlT3BlcmF0aW9uID0gdGhpcy5fdXBkYXRlT3BlcmF0aW9uRmFjdG9yeSh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5jYWxsUXVlcnlCdWlsZGVyT3BlcmF0aW9uKHVwZGF0ZU9wZXJhdGlvbiwgW21vZGVsT3JPYmplY3RdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vZGVsfE9iamVjdD19IG1vZGVsT3JPYmplY3RcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEB3cml0ZVF1ZXJ5T3BlcmF0aW9uXG4gIHVwZGF0ZUFuZEZldGNoKG1vZGVsT3JPYmplY3QpIHtcbiAgICBjb25zdCBkZWxlZ2F0ZU9wZXJhdGlvbiA9IHRoaXMuX3VwZGF0ZU9wZXJhdGlvbkZhY3RvcnkodGhpcyk7XG5cbiAgICBpZiAoIShkZWxlZ2F0ZU9wZXJhdGlvbi5pbnN0YW5jZSBpbnN0YW5jZW9mIHRoaXMuX21vZGVsQ2xhc3MpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VwZGF0ZUFuZEZldGNoIGNhbiBvbmx5IGJlIGNhbGxlZCBmb3IgaW5zdGFuY2Ugb3BlcmF0aW9ucycpO1xuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZUFuZEZldGNoID0gbmV3IFVwZGF0ZUFuZEZldGNoT3BlcmF0aW9uKCd1cGRhdGVBbmRGZXRjaCcsIHtcbiAgICAgIGRlbGVnYXRlOiBkZWxlZ2F0ZU9wZXJhdGlvblxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY2FsbFF1ZXJ5QnVpbGRlck9wZXJhdGlvbih1cGRhdGVBbmRGZXRjaCwgW2RlbGVnYXRlT3BlcmF0aW9uLmluc3RhbmNlLiRpZCgpLCBtb2RlbE9yT2JqZWN0XSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfEFycmF5LjxudW1iZXJ8c3RyaW5nPn0gaWRcbiAgICogQHBhcmFtIHtNb2RlbHxPYmplY3Q9fSBtb2RlbE9yT2JqZWN0XG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBAd3JpdGVRdWVyeU9wZXJhdGlvblxuICB1cGRhdGVBbmRGZXRjaEJ5SWQoaWQsIG1vZGVsT3JPYmplY3QpIHtcbiAgICBjb25zdCB1cGRhdGVBbmRGZXRjaCA9IG5ldyBVcGRhdGVBbmRGZXRjaE9wZXJhdGlvbigndXBkYXRlQW5kRmV0Y2gnLCB7XG4gICAgICBkZWxlZ2F0ZTogdGhpcy5fdXBkYXRlT3BlcmF0aW9uRmFjdG9yeSh0aGlzKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuY2FsbFF1ZXJ5QnVpbGRlck9wZXJhdGlvbih1cGRhdGVBbmRGZXRjaCwgW2lkLCBtb2RlbE9yT2JqZWN0XSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtNb2RlbHxPYmplY3Q9fSBtb2RlbE9yT2JqZWN0XG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBAd3JpdGVRdWVyeU9wZXJhdGlvblxuICBwYXRjaChtb2RlbE9yT2JqZWN0KSB7XG4gICAgY29uc3QgcGF0Y2hPcGVyYXRpb24gPSB0aGlzLl9wYXRjaE9wZXJhdGlvbkZhY3RvcnkodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuY2FsbFF1ZXJ5QnVpbGRlck9wZXJhdGlvbihwYXRjaE9wZXJhdGlvbiwgW21vZGVsT3JPYmplY3RdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vZGVsfE9iamVjdD19IG1vZGVsT3JPYmplY3RcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIEB3cml0ZVF1ZXJ5T3BlcmF0aW9uXG4gIHBhdGNoQW5kRmV0Y2gobW9kZWxPck9iamVjdCkge1xuICAgIGNvbnN0IGRlbGVnYXRlT3BlcmF0aW9uID0gdGhpcy5fcGF0Y2hPcGVyYXRpb25GYWN0b3J5KHRoaXMpO1xuXG4gICAgaWYgKCEoZGVsZWdhdGVPcGVyYXRpb24uaW5zdGFuY2UgaW5zdGFuY2VvZiB0aGlzLl9tb2RlbENsYXNzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdwYXRjaEFuZEZldGNoIGNhbiBvbmx5IGJlIGNhbGxlZCBmb3IgaW5zdGFuY2Ugb3BlcmF0aW9ucycpO1xuICAgIH1cblxuICAgIGNvbnN0IHBhdGNoQW5kRmV0Y2ggPSBuZXcgVXBkYXRlQW5kRmV0Y2hPcGVyYXRpb24oJ3BhdGNoQW5kRmV0Y2gnLCB7XG4gICAgICBkZWxlZ2F0ZTogZGVsZWdhdGVPcGVyYXRpb25cbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLmNhbGxRdWVyeUJ1aWxkZXJPcGVyYXRpb24ocGF0Y2hBbmRGZXRjaCwgW2RlbGVnYXRlT3BlcmF0aW9uLmluc3RhbmNlLiRpZCgpLCBtb2RlbE9yT2JqZWN0XSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfEFycmF5LjxudW1iZXJ8c3RyaW5nPn0gaWRcbiAgICogQHBhcmFtIHtNb2RlbHxPYmplY3Q9fSBtb2RlbE9yT2JqZWN0XG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBAd3JpdGVRdWVyeU9wZXJhdGlvblxuICBwYXRjaEFuZEZldGNoQnlJZChpZCwgbW9kZWxPck9iamVjdCkge1xuICAgIGNvbnN0IHBhdGNoQW5kRmV0Y2ggPSBuZXcgVXBkYXRlQW5kRmV0Y2hPcGVyYXRpb24oJ3BhdGNoQW5kRmV0Y2gnLCB7XG4gICAgICBkZWxlZ2F0ZTogdGhpcy5fcGF0Y2hPcGVyYXRpb25GYWN0b3J5KHRoaXMpXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5jYWxsUXVlcnlCdWlsZGVyT3BlcmF0aW9uKHBhdGNoQW5kRmV0Y2gsIFtpZCwgbW9kZWxPck9iamVjdF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBAd3JpdGVRdWVyeU9wZXJhdGlvblxuICBkZWxldGUoKSB7XG4gICAgY29uc3QgZGVsZXRlT3BlcmF0aW9uID0gdGhpcy5fZGVsZXRlT3BlcmF0aW9uRmFjdG9yeSh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5jYWxsUXVlcnlCdWlsZGVyT3BlcmF0aW9uKGRlbGV0ZU9wZXJhdGlvbiwgW10pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBkZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfEFycmF5LjxudW1iZXJ8c3RyaW5nPn0gaWRcbiAgICogQHJldHVybnMge1F1ZXJ5QnVpbGRlcn1cbiAgICovXG4gIGRlbGV0ZUJ5SWQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxldGUoKS53aGVyZUNvbXBvc2l0ZSh0aGlzLl9tb2RlbENsYXNzLmdldEZ1bGxJZENvbHVtbigpLCBpZCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfG9iamVjdHxBcnJheS48bnVtYmVyfHN0cmluZz58QXJyYXkuPEFycmF5LjxudW1iZXJ8c3RyaW5nPj58QXJyYXkuPG9iamVjdD59IGlkc1xuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgQHdyaXRlUXVlcnlPcGVyYXRpb25cbiAgcmVsYXRlKGlkcykge1xuICAgIGNvbnN0IHJlbGF0ZU9wZXJhdGlvbiA9IHRoaXMuX3JlbGF0ZU9wZXJhdGlvbkZhY3RvcnkodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuY2FsbFF1ZXJ5QnVpbGRlck9wZXJhdGlvbihyZWxhdGVPcGVyYXRpb24sIFtpZHNdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UXVlcnlCdWlsZGVyfVxuICAgKi9cbiAgQHdyaXRlUXVlcnlPcGVyYXRpb25cbiAgdW5yZWxhdGUoKSB7XG4gICAgY29uc3QgdW5yZWxhdGVPcGVyYXRpb24gPSB0aGlzLl91bnJlbGF0ZU9wZXJhdGlvbkZhY3RvcnkodGhpcyk7XG4gICAgcmV0dXJuIHRoaXMuY2FsbFF1ZXJ5QnVpbGRlck9wZXJhdGlvbih1bnJlbGF0ZU9wZXJhdGlvbiwgW10pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBpbmNyZW1lbnQocHJvcGVydHlOYW1lLCBob3dNdWNoKSB7XG4gICAgbGV0IHBhdGNoID0ge307XG4gICAgbGV0IGNvbHVtbk5hbWUgPSB0aGlzLl9tb2RlbENsYXNzLnByb3BlcnR5TmFtZVRvQ29sdW1uTmFtZShwcm9wZXJ0eU5hbWUpO1xuICAgIHBhdGNoW3Byb3BlcnR5TmFtZV0gPSB0aGlzLmtuZXgoKS5yYXcoJz8/ICsgPycsIFtjb2x1bW5OYW1lLCBob3dNdWNoXSk7XG4gICAgcmV0dXJuIHRoaXMucGF0Y2gocGF0Y2gpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtRdWVyeUJ1aWxkZXJ9XG4gICAqL1xuICBkZWNyZW1lbnQocHJvcGVydHlOYW1lLCBob3dNdWNoKSB7XG4gICAgbGV0IHBhdGNoID0ge307XG4gICAgbGV0IGNvbHVtbk5hbWUgPSB0aGlzLl9tb2RlbENsYXNzLnByb3BlcnR5TmFtZVRvQ29sdW1uTmFtZShwcm9wZXJ0eU5hbWUpO1xuICAgIHBhdGNoW3Byb3BlcnR5TmFtZV0gPSB0aGlzLmtuZXgoKS5yYXcoJz8/IC0gPycsIFtjb2x1bW5OYW1lLCBob3dNdWNoXSk7XG4gICAgcmV0dXJuIHRoaXMucGF0Y2gocGF0Y2gpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyaXRlUXVlcnlPcGVyYXRpb24odGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICBjb25zdCBmdW5jID0gZGVzY3JpcHRvci52YWx1ZTtcblxuICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24gZGVjb3JhdG9yJHdyaXRlUXVlcnlPcGVyYXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmlzRmluZFF1ZXJ5KCkpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlamVjdChuZXcgRXJyb3IoJ0RvdWJsZSBjYWxsIHRvIGEgd3JpdGUgbWV0aG9kLiAnICtcbiAgICAgICAgJ1lvdSBjYW4gb25seSBjYWxsIG9uZSBvZiB0aGUgd3JpdGUgbWV0aG9kcyAnICtcbiAgICAgICAgJyhpbnNlcnQsIHVwZGF0ZSwgcGF0Y2gsIGRlbGV0ZSwgcmVsYXRlLCB1bnJlbGF0ZSwgaW5jcmVtZW50LCBkZWNyZW1lbnQpICcgK1xuICAgICAgICAnYW5kIG9ubHkgb25jZSBwZXIgcXVlcnkgYnVpbGRlci4nKSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMucmVqZWN0KGVycik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNoZWNrRWFnZXIoYnVpbGRlcikge1xuICBpZiAoYnVpbGRlci5fZWFnZXJFeHByZXNzaW9uICYmIGJ1aWxkZXIuX2FsbG93ZWRFYWdlckV4cHJlc3Npb24pIHtcbiAgICBpZiAoIWJ1aWxkZXIuX2FsbG93ZWRFYWdlckV4cHJlc3Npb24uaXNTdWJFeHByZXNzaW9uKGJ1aWxkZXIuX2VhZ2VyRXhwcmVzc2lvbikpIHtcbiAgICAgIGJ1aWxkZXIucmVqZWN0KG5ldyBWYWxpZGF0aW9uRXJyb3Ioe2VhZ2VyOiAnZWFnZXIgZXhwcmVzc2lvbiBub3QgYWxsb3dlZCd9KSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1vZGVscyhyZXN1bHQpIHtcbiAgY29uc3QgYnVpbGRlciA9IHRoaXMuYnVpbGRlcjtcblxuICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgaWYgKHJlc3VsdC5sZW5ndGggJiYgdHlwZW9mIHJlc3VsdFswXSA9PT0gJ29iamVjdCcgJiYgIShyZXN1bHRbMF0gaW5zdGFuY2VvZiBidWlsZGVyLl9tb2RlbENsYXNzKSkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZXN1bHQubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgIHJlc3VsdFtpXSA9IGJ1aWxkZXIuX21vZGVsQ2xhc3MuZnJvbURhdGFiYXNlSnNvbihyZXN1bHRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0JyAmJiAhKHJlc3VsdCBpbnN0YW5jZW9mIGJ1aWxkZXIuX21vZGVsQ2xhc3MpKSB7XG4gICAgcmVzdWx0ID0gYnVpbGRlci5fbW9kZWxDbGFzcy5mcm9tRGF0YWJhc2VKc29uKHJlc3VsdCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBidWlsZChidWlsZGVyKSB7XG4gIGxldCBjb250ZXh0ID0gYnVpbGRlci5jb250ZXh0KCkgfHwge307XG4gIGxldCBpbnRlcm5hbENvbnRleHQgPSBidWlsZGVyLmludGVybmFsQ29udGV4dCgpO1xuICBsZXQga25leEJ1aWxkZXIgPSBidWlsZGVyLmtuZXgoKS5xdWVyeUJ1aWxkZXIoKTtcblxuICBjYWxsT25CdWlsZEhvb2tzKGJ1aWxkZXIsIGNvbnRleHQub25CdWlsZCk7XG4gIGNhbGxPbkJ1aWxkSG9va3MoYnVpbGRlciwgaW50ZXJuYWxDb250ZXh0Lm9uQnVpbGQpO1xuXG4gIGtuZXhCdWlsZGVyID0gYnVpbGRlci5idWlsZEludG8oa25leEJ1aWxkZXIpO1xuXG4gIGlmICghYnVpbGRlci5oYXMoL2Zyb218dGFibGV8aW50by8pKSB7XG4gICAgLy8gU2V0IHRoZSB0YWJsZSBvbmx5IGlmIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0IHlldC5cbiAgICBrbmV4QnVpbGRlci50YWJsZShidWlsZGVyLm1vZGVsQ2xhc3MoKS50YWJsZU5hbWUpO1xuICB9XG5cbiAgcmV0dXJuIGtuZXhCdWlsZGVyO1xufVxuXG5mdW5jdGlvbiBjaGFpbkhvb2tzKHByb21pc2UsIGZ1bmMpIHtcbiAgaWYgKF8uaXNGdW5jdGlvbihmdW5jKSkge1xuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLmJ1aWxkZXIsIHJlc3VsdCwgdGhpcy5idWlsZGVyKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGZ1bmMpKSB7XG4gICAgZnVuYy5mb3JFYWNoKGZ1bmMgPT4ge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpcy5idWlsZGVyLCByZXN1bHQsIHRoaXMuYnVpbGRlcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBjYWxsT25CdWlsZEhvb2tzKGJ1aWxkZXIsIGZ1bmMpIHtcbiAgaWYgKF8uaXNGdW5jdGlvbihmdW5jKSkge1xuICAgIGZ1bmMuY2FsbChidWlsZGVyLCBidWlsZGVyKTtcbiAgfSBlbHNlIGlmIChfLmlzQXJyYXkoZnVuYykpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IGZ1bmMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICBmdW5jW2ldLmNhbGwoYnVpbGRlciwgYnVpbGRlcik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhvb2tDYWxsZXIoaG9vaykge1xuICBjb25zdCBoYXNNZXRob2QgPSAnaGFzJyArIF8udXBwZXJGaXJzdChob29rKTtcblxuICAvLyBDb21waWxlIHRoZSBjYWxsZXIgZnVuY3Rpb24gZm9yIChtZWFzdXJlZCkgcGVyZm9ybWFuY2UgYm9vc3QuXG4gIGNvbnN0IGNhbGxlciA9IG5ldyBGdW5jdGlvbigncHJvbWlzZScsICdvcCcsIGBcbiAgICBpZiAob3AuJHtoYXNNZXRob2R9KCkpIHtcbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gb3AuJHtob29rfSh0aGlzLmJ1aWxkZXIsIHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICBgKTtcblxuICByZXR1cm4gKHByb21pc2UsIG9wZXJhdGlvbnMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IG9wZXJhdGlvbnMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICBwcm9taXNlID0gY2FsbGVyKHByb21pc2UsIG9wZXJhdGlvbnNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVPcGVyYXRpb25GYWN0b3J5KE9wZXJhdGlvbkNsYXNzLCBuYW1lLCBvcHRpb25zKSB7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBPcGVyYXRpb25DbGFzcyhuYW1lLCBvcHRpb25zKTtcbiAgfTtcbn1cblxuY29uc3QgY2hhaW5CZWZvcmVPcGVyYXRpb25zID0gY3JlYXRlSG9va0NhbGxlcignb25CZWZvcmUnKTtcbmNvbnN0IGNoYWluQmVmb3JlSW50ZXJuYWxPcGVyYXRpb25zID0gY3JlYXRlSG9va0NhbGxlcignb25CZWZvcmVJbnRlcm5hbCcpO1xuY29uc3QgY2hhaW5SYXdSZXN1bHRPcGVyYXRpb25zID0gY3JlYXRlSG9va0NhbGxlcignb25SYXdSZXN1bHQnKTtcbmNvbnN0IGNoYWluQWZ0ZXJRdWVyeU9wZXJhdGlvbnMgPSBjcmVhdGVIb29rQ2FsbGVyKCdvbkFmdGVyUXVlcnknKTtcbmNvbnN0IGNoYWluQWZ0ZXJJbnRlcm5hbE9wZXJhdGlvbnMgPSBjcmVhdGVIb29rQ2FsbGVyKCdvbkFmdGVySW50ZXJuYWwnKTtcbmNvbnN0IGNoYWluQWZ0ZXJPcGVyYXRpb25zID0gY3JlYXRlSG9va0NhbGxlcignb25BZnRlcicpO1xuXG5jb25zdCBmaW5kT3BlcmF0aW9uRmFjdG9yeSA9IGNyZWF0ZU9wZXJhdGlvbkZhY3RvcnkoRmluZE9wZXJhdGlvbiwgJ2ZpbmQnKTtcbmNvbnN0IGluc2VydE9wZXJhdGlvbkZhY3RvcnkgPSBjcmVhdGVPcGVyYXRpb25GYWN0b3J5KEluc2VydE9wZXJhdGlvbiwgJ2luc2VydCcpO1xuY29uc3QgdXBkYXRlT3BlcmF0aW9uRmFjdG9yeSA9IGNyZWF0ZU9wZXJhdGlvbkZhY3RvcnkoVXBkYXRlT3BlcmF0aW9uLCAndXBkYXRlJyk7XG5jb25zdCBwYXRjaE9wZXJhdGlvbkZhY3RvcnkgPSBjcmVhdGVPcGVyYXRpb25GYWN0b3J5KFVwZGF0ZU9wZXJhdGlvbiwgJ3BhdGNoJywge21vZGVsT3B0aW9uczoge3BhdGNoOiB0cnVlfX0pO1xuY29uc3QgcmVsYXRlT3BlcmF0aW9uRmFjdG9yeSA9IGNyZWF0ZU9wZXJhdGlvbkZhY3RvcnkoUXVlcnlCdWlsZGVyT3BlcmF0aW9uLCAncmVsYXRlJyk7XG5jb25zdCB1bnJlbGF0ZU9wZXJhdGlvbkZhY3RvcnkgPSBjcmVhdGVPcGVyYXRpb25GYWN0b3J5KFF1ZXJ5QnVpbGRlck9wZXJhdGlvbiwgJ3VucmVsYXRlJyk7XG5jb25zdCBkZWxldGVPcGVyYXRpb25GYWN0b3J5ID0gY3JlYXRlT3BlcmF0aW9uRmFjdG9yeShEZWxldGVPcGVyYXRpb24sICdkZWxldGUnKTtcbiJdfQ==